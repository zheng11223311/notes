<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../js/vue.js"></script>
</head>

<body>
    <div id="app">

        <!-- 子组件是不能引用父组件或Vue 示例的数据的
    在开发中,往往一些数据确实需要从上层传递下层
    在一个页面中,我们从服务器中请求到了很多的数据
    其中一部分数据，并不是我们整个大组件来展示的，
    而是需要下面的子组件进行展示
    这时候并不是让子组件再次发送请求，而是让大组件（父组件）数据
    传递给小组件（子组件）
    props->properties（属性）
    emit 自定义事件
-->

        <cpn v-bind:childmovies='movies' :cmessage='message'>无效内容,无效时显示</cpn>

        <!-- 没有v-bind movies当做一个字符串 {{childmovies}} 将会打印movies -->
        <cpn childmovies='movies' cmessage='message'>无效内容,无效时显示</cpn>
    </div>


    <template id="cpn2">
        <div>
            <ul>
                <li v-for='item in childmovies'>{{item}}</li>
            </ul>
            <h1>{{childmovies}}</h1>
            <p>{{cmessage}}</p>
        </div>

    </template>

</body>
<script>

    // 示例一
    function abc() {
        return {    //返回新创建的对象
            name: 'why',
            age: 18
        }
    }
    let obj1 = abc()
    let obj2 = abc()
    let obj3 = abc()
    obj1.name = 'hh'
    //不同的函数内返回的不同的对象,函数之间互不影响不会被修改
    console.log(obj1.name); //hh
    console.log(obj2.name); //why
    console.log(obj3.name); //why


    // 示例二
    const obj4 = {       //这样是获得obj4 的内存地址,
        name: 'why',
        age: 18
    }

    function abc1() {
        return obj4     //返回引用地址0x2624
    }
    let obj5 = abc1()
    let obj6 = abc1()
    let obj7 = abc1()
    obj5.name = 'hh'
    // 函数内返回的的对象不会被修改
    console.log(obj5.name); //hh
    console.log(obj6.name); //hh
    console.log(obj7.name); //hh

</script>
<script>
    //父传子:props
    const cpn = {
        template: '#cpn2',
        // props:{}   //两者都可以 很多中其他的写法  string boolean...
        // props:['childmovies','cmessage'],
        props: {
            //1.类型的限制
            // childmovies:Array,
            // cmessage:String     //String 大写..

            // 2.提供一些默认值,以及必传值
            cmessage: {
                type: String,
                default: 'aaa',   //没有传值默认值
                required: true    //布尔变量,必须向这个值传入值,不传报错 required 必须

            },
            childmovies: {
                // type:Array,      一种报错?
                //Object Array String Number Boolean Date Function Symbol
                type: [Array, String],    //两种类型
                //default 类型是对象或则数组时,默认值必须是一个函数
                // default:[], //在vue2.5.3 以下不会报错
                default() {
                    return []
                },

                // 自定义验证类型(自己定义),不匹配则报错
                validator(value){return false},
                // zdy(value) {
                //     return ['a', 'b'].indexOf(value) !== -1
                // }
            }
        },
        data() {
            return {

            }
        },
        methods: {

        }

    }

    const app = new Vue({   //开发中一般只使用一个app
        el: '#app',     //挂载元素
        data: {
            message: '你好啊',
            movies: ['海王', '海贼王', '海尔兄弟', '海绵宝宝']
        },
        computed: {   // computed 里面的函数只打印一次

        },
        methods: {  // methods 里面的函数打印多次

        },
        //过滤器 filters
        filters: {

        },
        components: {    //注册局部组件
            cpn         //ES6字面量属性增强写法  原式  cpn:cpn
        }
    })

</script>
<!-- 报错 -->
<!-- Duplicate keys detected: 'aa'. This may cause an update error -->
<!-- 绑定key的元素中     aaa 的 key 值多次重复添加  不绑定就不会报错-->

</html>