**开启一个本地服务器需要Node.js 中http 核心模块**

1.http 模块提供了搭建本地服务器的API,首先我们在项目中引入:

> let http=require('http')

引入之后我们利用http.createServer() 方法得到一个服务器实例,createServer() 方法返回一个server 实例,所以我们需要一个变量来接收

> let server=http.createServer()    

2.经过以上两步,我们已经搭建好了一个服务器实例,然后我们给服务器实例绑定接收request 的事情处理函数,代码如下:

> server.on('request',(req,res)=>{
>
> ​	console.log(req.url)	获取到请求的路径(请求永远以'/' 开头)
>
> })
>
> 给服务绑定接受请求的处理事件,当服务器接收到客户端发送的请求后,会调用后面的处理函数,处理函数接收两个参数,请求信息对象,响应信息对象

3.绑定监听端口号,开启服务器,代码如下:

> server.listen(3000,()=>{
>
> ​				console.log('服务器开启成功,可以通过http://127.0.0.1:3000/来获取数据~')
>
> })
>
> server.listen() 用来绑定监听的端口号,可以传入第二个参数,当服务器开启成功后,触发后面的回调函数

设置状态码和响应头

res.writeHead(200,{'Content-Type':'text/plain'})

设置响应头

res.setHeader('Content-Type','text/html')

写入内容

res.write('内容')

结束响应

res.end('显示内容')

```js
//index.js 文件
//http 模块 内置模块,不需要安装
let http=require('http')

// 通过创建server 服务器对象
let server=http.createServer()
// 监听当前服务器对象的请求
server.on('request',(req,res)=>{
    //当服务器被请求时,会触发请求事件,并传入请求对象和响应对象
    
    // console.log(req);
    // console.log(req.url);       //请求的路径
    // console.log(req.headers);

    res.setHeader('Content-Type','text/html;charset=UTF-8')
    // 根据路径信息,显示不同的页面内容
    if(req.url=='/'){
        res.end('<h1>欢迎来到首页<h1><img src="https://www.baidu.com/img/PCfb_5bf082d29588c07f842ccde3f97243ea.png">')
    }else if(req.url=='/gnxw'){
        res.end('欢迎来到国内新闻')
    }else if(req.url=='/ylxw'){
        res.end('欢迎来到娱乐新闻')
    }else{
        res.end('404 页面丢失')
    }

    // res.end('hello world')   //结束消息
    // res.end('欢迎光临')     //结束消息要放到最后,相当于return 
})

// 服务器监听的端口号
server.listen(3000,()=>{
    //启动监听端口号成功时触发
    console.log('服务器启动成功');
})
```

