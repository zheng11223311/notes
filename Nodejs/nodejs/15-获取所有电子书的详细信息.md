**获取所有电子书的详细信息**

```js
//index.js 文件
// 获取所有电子书的详细信息
//获取https://sobooks.cc/ 所有电子书的链接书名
//进入网站,获取整个网站列表的页数
let puppeteer =require('puppeteer')
let axios=require('axios')


console.log('一共'+4*7*325+'本电子书');     //9100

let httpUrl='https://sobooks.cc/';      //加; 防止与后面的() 连接
(async function(){
    let option={
        defaultViewport:{       //设置视窗的大小
            width:1200,
            height:600
        },
        headless:false,      // headless:false 有界面
        //设置放慢每个操作步骤的毫秒数
        slowMo:250
    }

    let browser=await puppeteer.launch(option)
try{


    async function getAllNum(){
        let page=await  browser.newPage()
        await page.goto(httpUrl)
        //设置选着器,获取总页数
     let pageNum=await page.$eval('body',(element)=>{
         console.log(11111);
            let text= element.innerHTML
            text=text.substring(1,text.length-2).trim()
            console.log(text);
            return text
        })
        page.close()        //关闭标签
        return pageNum
    }
   let pageNum=getAllNum()

   async function pageList(num){
        let pageListUrl='https://sobooks.cc/page/'+num
        let page=await browser.newPage()
        //访问列表页地址
        await page.goto(pageListUrl)
        let arrPage=await page.$$eval('.card .card-item focus>a',(elements)=>{
            console.log(1111111111);
            let arr=[]
            element.forEach((item,i)=>{
                var obj={
                    href:item.getAttribute('href'),
                    title:item.getAttribute('title')
                }
                arr.push(obj)

            })
            console.log(arr);
            return arr
        })
            page.close()
            //通过获取的数组的地址和标题去请求书籍的详情页
            arrPage.forEach((item,i)=>{
                getPageInfo(item)
            })
    }

    async function getPageInfo(pageObj){
        let page=await browser.newPage()
        await page.goto(pageObj.href)
        let eleA=await page.$('.dltable tr:nth-child(3) a:last-child')
        //获取连接属性
         let aHref=await eleA.getProperty('href')
         console.log(aHref);

    }


}catch(err){
    console.log(err);
}
    //获取列表页的所有链接


    //进入每个电子书的详情页获取下载电子书的网盘地址

    //将获取到的数据保存到book.txt 文档里面




})()

```

