 **服务器封装**

```js
//index.js 文件
// 服务器封装
let http=require('http')
let path=require('path')
// console.log(path);
class lcApp{
    constructor(){
        this.server=http.createServer()
        this.reqEvent={
            // '/':function(){},
            // '/static':function(){}
        }
        this.server.on('request',(req,res)=>{
            //解析路径
            // let pathObj=path.parse(req.url)
           console.log(req.url);
            if(req.url in this.reqEvent){
                // console.log(this.reqEvent);
                this.reqEvent[req.url](req,res)
            }else{
                res.setHeader('content-type','text/html;charset=utf-8')
                res.end('<h1>404!页面找不到</h1>')
            }
        })
    }
        on(url,fn){
            this.reqEvent[url]=fn
        }
        run(port,callback){
            this.server.listen(port,callback)
        }
}

module.exports=lcApp
```

**使用服务器**

```js
//index1.js 文件
let lcApp=require('./index1.js')
console.log(lcApp);
let app=new lcApp()

app.on('/',(req,res)=>{
    res.setHeader('content-type','text/html;charset=utf-8')
    res.end('这是首页')
})


app.on('/gnxw',(req,res)=>{
    res.setHeader('content-type','text/html;charset=utf-8')
    res.end('这是国内新闻')
})
app.on('/static',(req,res)=>{
    res.setHeader('content-type','text/html;charset=utf-8')
    res.end('这是国内新闻')
})

app.run(80,()=>{
    console.log('http://127.0.0.1 已启动');
})
```

