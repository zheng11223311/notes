**经典面试题**

> 1.react/vue 中的key 有什么作用?(key 的内部原理是什么?)
>
> 2.为什么遍历列表时,key 最好不要用index?



**1.虚拟DOM 中的key 的作用**:

> 1.简单的说:key 是虚拟DOM 对象的标识,在更新显示时key 起着极其重要的作用
>
> 2.详细的说:当状态中的数发生变化时,react 会根据[新数据]生成[新的虚拟DOM],随后React 进行[新的虚拟DOM]与[旧的虚拟DOM]的diffing 比较,比较规则如下:
>
> ​	a.旧的虚拟DOM 找到了与新的虚拟DOM 相同的key:
>
> ​		1.若虚拟DOM 中的内容没变,直接使用之前的真实DOM
>
> ​		2.若虚拟DOM 中的内容变了,则生成新的真实DOM,随后替换掉页面中之前的真实DOM
>
> ​	b.旧虚拟DOM 中未找到与新的虚拟DOM 相同的key
>
> ​		根据数据创建新的真实DOM,随后渲染到页面

**2.用index 作为key 可能会引发的问题**

> ​	1.若对数据进行:逆序添加,逆序删除等破坏顺序操作:
>
> ​		会产生没有必要的真实DOM 更新==>界面效果没问题,但效率低
>
> ​	2.如果结构还包含输入类的DOM(比如input):
>
> ​		会产生错误的DOM 更新===>界面有问题
>
> ​		li 被更新,但是li 里面的input 复用旧DOM 的input,input 		输入框里面残留的信息会被复用
>
> ​	3.注意!如果不存在对数据的逆序添加,逆序删除等破坏顺序的操作
>
> ​		仅用于渲染列表用于展示,使用index 作为key 没有问题

**慢动作回放------使用index 索引值作为key**

> 初始化数据:
>
> ​			{id:1,name:'校长',age:18},
>
> ​            {id:2,name:'小李',age:28}
>
> 初始化虚拟DOM:
>
> ​			\<li key=0>校长---18\</li>
>
> ​			\<li key=1>小李---28\</li>
>
> 更新后的数据:
>
> ​			{id:3,name:'小欧啊',age:20},
>
> ​			{id:1,name:'校长',age:18},
>
> ​            {id:2,name:'小李',age:28}
>
> 更新数据后的虚拟DOM:
>
> ​			\<li key=0>小欧啊---20\</li>
>
> ​			\<li key=1>校长---18\</li>
>
> ​			\<li key=2>小李---28\</li>
>
> 对比两个DOM

**3.开发中如何选择key?**

> ​	1.最好使用每条数据的唯一标示作为key,,例如:id,手机号,身份证号,学号等唯一值
>
> ​	2.如果确定只是简单的展示数据,用index 的也是可以的

