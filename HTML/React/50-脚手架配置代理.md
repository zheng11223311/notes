**React ajax**

**1.前置说明**

1.React 本身只关注于界面,并不包含发送ajax 请求的代码

2.前端应用需要通过ajax 请求与后台进行交互(jsn 数据)

3.react 应用中需要集成第三方ajax 库(或自己封装)

**2.常用ajax 请求库**

1.jQuery:比较重,如果需要另外引入不建议使用

2.axios:轻量级,建议使用

​	1.封装XMLHttpRequest 对象的ajax

​	2.Promise 风格

​	3.可以用在是浏览器端和node 服务器

**3.ajax**

**跨域代理**

本地使用https://localhost:3000

在package.json 配置proxy 文件

```json
{
  "proxy":"https://localhost:8080"
}

```

注意:代理的服务器是开在public 文件夹上的,当请求的数据在public 文件夹下存在,则会使用public 下的文件,例如

```js
axios.get("https://localhost:3000/index.html")
```

当public 下有index.html 文件时,会先请求到本地public 文件夹下的index.html 文件

**跨多个域的代理**

这时候不是在package.json 文件里面配置,而是在src 文件夹下创建一个setupProxy.js 文件

这个文件不能使用ES6 语法,而是使用commonJS 语法

```js
const proxy=require('http-proxy-middleware')
    //这里的代码变化需要重新启动服务器
module.exports=function(app){
    app.use(
        proxy('/api',{      //检测到请求路径带有/api 的路径,会触发该代理
            target:'http://localhost:5000',
            changeOrigin:true,  //控制服务器收到的请求头中的Host 字段,没有这个属性的话,
            //一般能获取到数据,但是服务器上显示的是3000端口的请求,而不是5000端口,
            //严格的服务器检测到也会阻止
            pathRewrite:{
                '^/api':'',     //将请求地址的/api 替换为空(重写请求路径)
            }
        }),
        proxy('/api2',{
            target:'http://localhost:5001',
            changeOrigin:true,
            pathRewrite:{
                '^/api2':'',     //将请求地址的/api2 替换为空
            }
        })
    )
}
```

**请求示例**

请求https://localhost:5000/index.html  的文件

```
axios.get("https://localhost:3000/api/index.html")
```

