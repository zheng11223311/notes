# 小程序的宿主环境

### 什么是宿主环境

`宿主环境`(host environment) 指的是`程序运行所必须的依赖环境`,例如:

`Android 系统`和`IOS 系统`是两个不同的宿主环境,安卓版的微信App 是不能在IOS 环境下运行的,所以,Android 是安卓软件的宿主环境,`脱离了宿主环境的软件是没有任何意义的!`



### 小程序的宿主环境

`手机微信是小程序的宿主环境`,如图所示:

小程序`借助宿主环境提供的能力`,可以完成许多普通网页无法完成的功能,例如:

微信扫码,微信支付,微信登入,地理定位,ETC ....

![](D:\学习\wanye\HTML\微信小程序\笔记\img\7-1.png)



# 小程序宿主环境包含的内容

1. 通信模型
2. 运行机制
3. 组件
4. API





### 通信的主体

小程序中通信的主体是`渲染层`和`逻辑层`,其中:

1. WXML 模板和WXSS 样式工作在渲染层
2. JS 脚本工作在逻辑层

![](D:\学习\wanye\HTML\微信小程序\笔记\img\7-2.png)



### 小程序的通信模型

小程序中的通信模型分为两部分:

1. `渲染层`和`逻辑层`之间的通信
   1. 由微信客户端进行转发
2. `逻辑层`和`第三方服务器`之间的通信
   1. 由微信客户端进行转发

![](D:\学习\wanye\HTML\微信小程序\笔记\img\7-3.png)



### 小程序启动的过程

1. 把小程序的代码包下载到本地
2. 解析app.json 全局配置文件
3. 执行app.js 小程序入口文件,`调用APP() 创建小程序实例`
4. 渲染小程序首页
5. 小程序启动完成



### 页面渲染的过程

1. 加载解析页面的.json 配置文件
2. 加载页面的.wxml 模板和 .wxss 样式
3. 执行页面的 .js 文件,调用`Page() 创建页面实例`
4. 页面渲染完成

