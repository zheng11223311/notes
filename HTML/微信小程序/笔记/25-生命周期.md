# 生命周期

### 什么是生命周期

`生命周期(Life Cycle)`指的是一个对象从`创建`->`运行`->`销毁` 的整个阶段,`强调的是一个时间段`,例如:

- 张三`出生`,表示这个人`生命周期的开始`
- 张三`离去`,表示这个人`生命周期的结束`
- 中间张三的一生,就是张三的生命周期



我们可以把每个小程序运行的过程,也概括为生命周期:

- 小程序的`启动`,表示`生命周期的开始`
- 小程序的`关闭`,表示`生命周期的结束`
- 中间小程序运行的过程,就是小程序的生命周期





### 生命周期的分类

在小程序中,生命周期分为两类,分别是:

1. **应用生命周期**
   1. 特指小程序从启动->运行->销毁 的过程
2. **页面生命周期**
   1. 特指小程序中,每个页面的加载 -> 渲染 -> 销毁 的过程

其中,`页面`的生命周期`范围较小`,`应用程序`的生命周期`范围较大`,如图所示:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\25-1.png)





### 什么是生命周期函数

`生命周期函数:` 是由小程序框架提供的`内置函数`,会伴随着生命周期,`自动按次序执行`

`生命周期函数的作用:` 允许程序员在`特定的时间点,执行某些特定的操作`,例如,页面刚加载的时候,可以在onLoad 生命周期函数中初始化页面的数据

**注意: 生命周期强调的是时间段,生命周期函数强调的是时间点**





### 生命周期函数的分类

在小程序中,生命周期函数分为两类,分别是:

1. **应用生命周期函数**
   1. 特指小程序从启动->运行->销毁 期间依次调用的那些函数
2. **页面生命周期函数**
   1. 特指小程序中,每个页面的加载 -> 渲染 -> 销毁  期间依次调用的那些函数





# 应用的生命周期函数

小程序的`应用生命周期函数`需要在`app.js` 中进行声明,示例代码如下:

```js
// app.js 文件
App({
    // 小程序初始化完成时,执行此函数,全局只触发一次,可以做一些初始化的工作
    onLaunch:function(options){},
    //小程序启动,或者从后台进入前台显示时出发
    onShow:function(options){},
    //小程序从前台进入后台时出发
    onHide:function(){},
      /**
   * 当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息
   */
  onError: function (msg) {
    
  }
})
```

在工具栏中有一个切后台 按钮,模拟切换到后台,没有的可以右键工具栏->管理工具图标->勾选切后台 





### 页面的生命周期函数

小程序的`页面生命周期函数`需要在页面的`.js` 中进行声明,示例代码如下:

```js
// 页面的 .js 文件
Page({
    onLoad:function(options){},	//监听页面加载,一个页面只调用1次
    onShow:function(){},		//监听页面显示
     onReady:function(){},		//监听页面初次渲染完成,一个页面只调用1次
     onHide:function(){}, //监听页面隐藏
     onUnLoad:function(){},	//监听页面卸载,一个页面只调用1次
})
```

