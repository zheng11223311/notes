# 全局配置

### 全局配置文件集常用的配置项

小程序根目录下的`app.json` 文件时小程序的`全局配置文件`,常用的配置项如下:

1. **pages**
   1. 记录当前小程序所有页面的存放路径
2. **window**
   1. 全局设置小程窗口的外观
3. **tabBar**
   1. 设置小程序底部的tabBar 效果
4. **style**
   1. 是否启用新版的组件样式





### 小程序窗口的组成部分

导航栏区域和背景区域(包括其中的小圆点) 可以通过window 属性配置

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-1.png)









### 了解window 节点常用的配置项

| 属性名                       | 类型     | 默认值  | 说明                                        |
| ---------------------------- | -------- | ------- | ------------------------------------------- |
| navigationBarTitleText       | String   | 字符串  | 导航栏标题文字内容                          |
| navigationBarBackgroundColor | HexColor | #000000 | 导航栏背景颜色,如#000000                    |
| navigationBarTextStyle       | string   | whilte  | 导航栏标题颜色,仅支持black/white            |
| navigationBarColor           | HexColor | #ffffff | 窗口的背景色                                |
| backgroundColor              | String   | dark    | 下拉loading 的样式,仅支持dark/light         |
| enablePullDownRefresh        | Boolean  | false   | 是否全局开启下拉刷新                        |
| onReachBottomDistance        | Number   | 50      | 页面上拉触底事件触发时距页面底部距离,单位px |





# 设置导航栏的标题

设置步骤:`app.json->window->navigationBarTitleText`

需求:把导航栏上的标题,从默认的`weChat` 修改为`黑马程序员`, 效果如图:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-2.png)



### 设置导航栏的背景色

设置步骤:`app.json->window->navigationBarBackgroundColor`

需求:把导航栏标题的背景色,从默认的`#fff` 修改为`#2b4b6b`,(只支持16进制的颜色) 效果如图:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-3.png)



### 设置导航栏的标题颜色

设置步骤:`app.json->window->navigationBarTextStyle`

需求:把导航条上的标题,从默认的`black` 修改为`white`,(只支持16进制的颜色) 效果如图:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-4.png)

**注意:navigationBartextStyle 的可选值只有black 和white**





### 全局开启下拉刷新功能

概念:`下拉刷新`是移动端的专有名词,指的是通过手指在屏幕上的下拉滑动操作,从而`重新加载页面数据`的行为

设置步骤:`app.json->window->enablePullDownrefresh`的值设置为`true`

**注意:在app.json 中启用下拉刷新功能,会作用于每个小程序页面**

此处需要使用手机扫码.建议使用真机查看,模拟器和手机查看会都会出现不同的问题(变色,下拉后不会上去)

后期会修改





# 设置下拉刷新时窗口的背景色

当全局开启下拉刷新功能之后,默认的窗口背景色为白色,如果自动以下拉刷新窗口背景色,设置步骤为:

`app.json->window->backgroundColor`指定16进制的颜色值`#efefef`,效果如下:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-5.png)



### 设置下拉刷新时laoding 的样式

当全局下拉刷新功能开启之后,默认窗口的loading 样式为白色,如果要更改loading 样式的效果,设置步骤为:`app.json->window->backgroundTextStyle`指定为dark 值,效果如下:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-6.png)

**注:backgroundTextStyle 的可选值只有light 和dark**









### 设置上拉触底的距离

概念:`上拉触底`是移动端的专有名词,通过手指在屏幕上的上拉滑动操作,从而`加载更多数据`的行为

设置步骤为:`app.json->window->onReachBottomDistance` 设置新的数值,不需要带单位

**注意: 默认距离为50px ,如果没有特殊需求,建议使用默认值**





# 什么是tabBar

`tarBar`是移动端应用常见的页面效果,`用于实现多页面的快速切换`,小程序中通常将其分为:

- 底部tarBar
- 顶部tabBar



**注意:**

- tabBar 中只能配置`最少2个,最多5个`tab 标签
- 当渲染`顶部tarBar`时,`不显示icon`,只显示文本

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-7.png)





### tabBar 的6 个组成部分

1. `backgroundColor: `tabBar 的背景色
2. `selectedIconPath: `选中时的图片路径
3. `borderStyle: `tabBar 上边框的颜色
4. `iconPath: `未选中时的图片路径
5. `selectedColor: `tab 上的文字选中时的颜色
6. `color: `tab 上文字的默认(未选中)颜色

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-8.png)





### tabBar 节点的配置项

| 属性            |          | 必填 | 默认值 | 描述                                    |
| --------------- | -------- | ---- | ------ | --------------------------------------- |
| position        | String   | 否   | bottom | tabBar 的位置,仅支持`bottom/top`        |
| borderStyle     | String   | 否   | black  | tabBar 上边框的颜色,仅支持`black/white` |
| color           | HexColor | 否   |        | tab 上文字默认(未选中)的颜色            |
| selectedColor   | HexColor | 否   |        | tab 上文字选中时的颜色                  |
| backgroundColor | HexColor | 否   |        | tarBar 的背景色                         |
| `list`          | `Array`  | 是   |        | tab 页签的列表,`最少2个,最多5个`        |



### 每个tab 的配置选项

| 属性             | 类型   | 必填 | 描述                                                |
| ---------------- | ------ | ---- | --------------------------------------------------- |
| pagePath         | String | 是   | 页面路径,页面必须在pages 中预先定义                 |
| text             | String | 是   | tab 上显示的文字                                    |
| iconPath         | String | 否   | `未选中时`的图片路径;当position 为top 时,不显示icon |
| selectedIconPath | String | 否   | `选中时`的图片路径;当position 为top 时,不显示icon   |

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-9.png)











# 案例:配置tabBar

### 需求描述

根据资料中提供的小图标,在小程序中配置如图所示的tabBar 效果:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-10.png)



### 实现步骤

1. 拷贝图标资源
2. 新建3个对应的tab 页面
3. 配置tabBar 选项





### 步骤1- 拷贝图标资源

1. 把资料目录中的`images`文件夹,`拷贝到小程序项目根目录中`
2. 将需要用到的小图标分为3组,每组2个,其中:
   1. 图片名称`包含 -active` 的是选中之后`的图标`
   2. 图片名称`不包含 -active` 的是`默认的图标`

截图如下:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\17-11.png)





### 步骤2- 新建3个对应的tab 页面

通过app.json 文件的pages 节点,快速新建 3个对应的tab 页面,示例代码如下:

```json
{
    "pages":[
         "pages/home/home",
        "pages/message/message",
        "pages/contact/contact"
    ]
}
```

其中,`home`是首页,`message`是消息页面 ,`contact`是联系我们页面





### 步骤3 - 配置tabBar 选项

1. 打开`app.json` 配置文件,和pages ,window 平级,新增`tabBar`节点
2. tabBar 节点中,新增`list 数组`,这个数组中存放的,是每个tab 项的配置对象
3. 在list 数组中,`新增每一个tab 项的配置对象`,对象中包含的属性如下:
   1. `pagePath` 指定当前tab 对应的页面路径[必填]
   2. `text` 指定当前tab 上按钮的文字[必填]
   3. `iconPath` 指定当前tab 未选中时候的图片路径[可选]
   4. `selectedIconPath` 指定当前tab 被选中后高亮的图片路径[可选]





# 注意

**注:tabBar 的所有页面路径必须是在pages 属性中最前面,否则无法正常显示tabBar**





