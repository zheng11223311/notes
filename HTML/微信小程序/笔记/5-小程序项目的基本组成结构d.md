# 项目结构

### 了解项目的基本组成结构

1. `pages 用来存放所有小程序的页面`
2. utils 用来存放工具性质的模块(例如:格式化时间的自定义模块)
3. `app.js 小程序项目的入口文件`
4. `app.json 小程序项目的全局配置文件`
5. app.wxss 小程序项目的全局样式文件
6. project.config.json 项目的配置文件
7. sitemap.json 用来配置小程序及其页面是否允许被微信索引

![](D:\学习\wanye\HTML\微信小程序\笔记\img\5-1.png)



### 小程序页面的组成部分

小程序官方建议把所有小程序的页面,都存放在`pages 目录`中,以`单独的文件夹`存在,如图所示:

其中,每个页面`由4 个基本文件`组成,他们分别是:

- `.js `文件(页面的脚本文件,存放页面的数据,事件处理函数等)
- `.json `文件(当前页面的配置文件,配置窗口的外观,表现等)
- `.wxml` 文件(页面的模板结构文件)
- `.wxss` 文件(当前页面的样式文件)

![](D:\学习\wanye\HTML\微信小程序\笔记\img\5-2.png)





### JSON 配置文件的作用

`JSON 是一种数据格式`,在实际开发中,`JSON`总是以`配置文件`的形式出现,小程序项目中也不例外:通过不同的.json 配置文件,可以对小程序项目进行不同级别的配置

小程序项目中有 4 中json 配置文件,分别是:

1. 项目根目录中的`app.json`配置文件
2. 项目更目录中的`project.config.json`配置文件
3. 项目根目录中的`sitemap.json`配置文件
4. `每个页面文件夹中的.json 配置文件`



### app.json 文件

app.json 是当前小程序的`全局配置`,包括了小程序的`所有页面路径,窗口外观,界面表现,底部tab 等`

Demo 项目里边的app.json 配置内容如下:

简单了解下这4个配置项的作用:

1. `pages:`用来记录当前小程序所有页面的路径
2. `window :`全局定义小程序所有页面的背景色,文字颜色等
3. `style:`全局定义小程序组件所使用的样式版本,
   1. `v2` 表示使用最新的样式版本,如果想使用旧版本,直接删除style 属性即可
4. `sitemapLocation:` 用来指明sitemap.json 的位置

![](D:\学习\wanye\HTML\微信小程序\笔记\img\5-3.png)





### project.config.json 文件

project.config.json 是项目配置文件,用来记录我们`对小程序开发工具所做的个性化配置`,例如:

- `setting`中保存了`编译相关的配置`
  - 对应的`详情`菜单栏中的`本地设置`里的内容,修改`本地设置`中的内容,`setting` 中的值也会发生变化
- `projectname`中保存的是`项目名称`
  - 项目名称不等于小程序名称.小程序名称在后台中设置
- `appid`中个保存的是`小程序的账号ID`



### sitemap.json 文件

微信现在已开放`小程序内搜索`,效果类似于PC 网页的SEO, sitemap.json 文件用来`配置小程序页面是否允许微信索引`

当开发者允许微信索引时,微信会通过爬虫的形式,为小程序的页面内容建立索引,当用户的搜索关键字和页面的索引匹配成功的时候,小程序的页面将可能展示在搜索结果中

1. `rules` 表示匹配的规则
2. `page:` `*` 表示所有页面
3. `action: ` `allow` 表示都允许微信进行索引,`disallow`表示不允许
4. 即所有页面允许微信进行索引

终端调试工具会显示,`根据sitemap 的规则[0],当前页面[pages/index/index] 将被索引`

**注意: sitemap 的索引提示是默认开启的,如需关闭sitemap 的索引提示,可在小程序项目配置文件`project.config.json `的`setting` 中配置字段`checkSiteMap`为`false`**

![](D:\学习\wanye\HTML\微信小程序\笔记\img\5-4.png)





### 页面的 .json 配置文件

小程序页面中的每一个页面,可以使用.json 文件来`对本页面的窗口外观进行配置,页面中的配置项会覆盖app.json 的window 中相同的配置项`,例如:

![](D:\学习\wanye\HTML\微信小程序\笔记\img\5-5.png)

