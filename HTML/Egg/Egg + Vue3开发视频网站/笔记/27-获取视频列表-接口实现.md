## 获取视频列表-接口实现

#### 路由新增

```js
  // 获取视频列表-接口实现
  router.get('/videos', controller.video.getVideos);
```



#### 控制器 video新增

```js
  async getVideos() {
    const { Video } = this.app.model;
    let { pageNum = 1, pageSize = 10 } = this.ctx.query;
    pageNum = Number.parseInt(pageNum);
    pageSize = Number.parseInt(pageSize);
    console.log(pageNum, pageSize);
    const getvideos = Video.find().populate('user').sort({
      createAt: -1,
    })
      .skip((pageNum - 1) * pageSize)
      .limit(pageSize);

    const getvideosCount = Video.countDocuments(); // 数据总数量
    const [ videos, videosCount ] = await Promise.all([
      getvideos,
      getvideosCount,
    ]);
    this.ctx.body = {
      videos,
      videosCount,
    };
  }
```

