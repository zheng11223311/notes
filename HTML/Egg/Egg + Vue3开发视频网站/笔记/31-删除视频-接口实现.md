## 删除视频-接口实现

#### 路由新增

```js
  // 删除视频-接口实现
  router.delete('/videos/:videoId', auth, controller.video.deleteVideos);
```



#### video.js 控制器新增

```js
  async deleteVideos() {
    const { Video } = this.app.model;
    const { videoId } = this.ctx.params;
    const userId = this.ctx.user._id;

    // 查询视频
    const video = await Video.findById(videoId);
    if (!video) {
      this.ctx.throw(404, 'Video Not Found');
    }

    // 视频作者必须是当前登入用户
    if (!video.user.equals(userId)) {
      this.ctx.throw(403); // 禁止访问"Forbidden"
    }

    await video.remove();
    this.ctx.status = 204;
  }
```

