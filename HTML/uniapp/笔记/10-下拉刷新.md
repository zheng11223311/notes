### 下拉刷新

**开启下拉刷新**

在uni-app 中有两种方式开启下拉刷新

- 需要在`pages.json`里,找到当前页的pages 节点,并在`style`选项中开启`enablePullDownRefresh`
- 通过调用uni.startPullDownRefresh 方法来开启下拉刷新

| 函数名            | 说明                                                         | 平台差异说明                                        | 最低版本 |
| ----------------- | ------------------------------------------------------------ | --------------------------------------------------- | -------- |
| onResize          | 监听窗口尺寸变化                                             | App,微信小程序                                      |          |
| onPullDownRefresh | 监听用户下拉动作,一般用于下拉刷新                            |                                                     |          |
| onReachBottom     | 页面滚动到底部的事件(不是scroll-view 滚动到底),常用于下拉下一页数据 |                                                     |          |
| onTabItemTap      | 点击tab 时触发,参数为Object                                  | 微信小程序,百度小程序,H5,App(自定义组件)            |          |
| onShareAppMessage | 用户点击右上角分享                                           | 微信小程序,百度小程序,头条小程序,H5,App(自定义组件) |          |

**示例**

pages.json

```json
{
	"pages": [ //pages数组中第一项表示应用启动页，参考：https://uniapp.dcloud.io/collocation/pages
	// 第一个对象 中的path 代表首页
		{
			"path": "pages/style/style"	,//pages下index 下的index.vue 页面文件
			"style":{
				"enablePullDownRefresh":true,	//当前页面允许刷新
                "onReachBottomDistance":200	//滚动到距离底部多少算触底,只支持单位px
			}
		}
	],
	"globalStyle": {
		"navigationBarTextStyle": "white",		//导航栏文字颜色
		"navigationBarTitleText": "开发小程序",	//导航栏文字
		"navigationBarBackgroundColor": "#7fff00",		//导航栏颜色
		"backgroundColor": "#F8F8F8",	//下拉背景色	//下拉再小程序上会显示
		// "enablePullDownRefresh":true,	//全局开启下拉
		"backgroundTextStyle":"light"	//下拉刷新的颜色
	},
	"tabBar":{
		"color":"#aa386f",	//tabbar 中文字的颜色
		"selectedColor":"#ddbe4c",	//选中时的颜色
		"backgroundColor":"#e1fff1",	//tabbar 背景颜色
		"borderStyle":"white",	//tabbar 上边框颜色,仅支持App 修改颜色
		// "position":"top",   //tabbar 在顶部显示
		"list":[
			{
				"text":"首页",
				"pagePath":"pages/style/style",
				"iconPath":"static/tab/首页.png",
				"selectedIconPath":"static/tab/首页s.png"
			}
		]
	},
	"condition":{	//配置跳转的其他不是tabbar 的页面
		"current":0,
		"list":[
			{
				"name":"详情页",
				"path":"pages/detail/detail",
				"query":"id=80"		//传递到详情页的参数
			}
		]
	}
}

```

**style.vue**

**上拉加载**

```vue
<template>
	<view class="content">
		<view class="content">
			这是列表页
		</view>
		<view class="content" style="margin-top:50px">
			{{list}}
			<!-- 方法2 下拉刷新 -->
			<button  type="default" @click="pulldown">点击下拉刷新</button>
		</view>
	</view>
</template>

<script>
	export default{
		data(){ 
			return{
				list:['前端','JAVA','UI','测试','大数据']
			}
		},
		methods:{
		   pulldown(){
			   uni.startPullDownRefresh({
			   	
			   })
		   }
		},
		onPullDownRefresh() {
			console.log('触发下拉')
			this.list='修改文字'
			uni.stopPullDownRefresh()	//关闭下拉刷新
		}
		
	}
</script>

<style>
	
</style>

```

**触底方法**

```vue
<template>
	<view class="content">
		<view class="content">
			这是列表页
		</view>
		<view class="content" v-for=" item in list">
			{{item}}
		</view>
	</view>
</template>

<script>
	export default{
		data(){ 
			return{
				list:['前端','JAVA','UI','测试','大数据','前端','JAVA','UI','测试','大数据']
			}
		},
		methods:{
		   pulldown(){
			   uni.startPullDownRefresh({
			   	
			   })
		   }
		},
		onPullDownRefresh() {
			console.log('触发下拉')
			this.list='修改文字'
			uni.stopPullDownRefresh()	//关闭下拉刷新
		},
		onReachBottom() {
			console.log('页面触底了')
		}
		
	}
</script>

<style>
.content{
	height: 100px;
	line-height: 100px;
}	
</style>

```

