# 微信小程序数据绑定

### 数据的绑定与使用

`Pages/index/index.js`

```js
Page({

  /**
   * 页面的初始数据
   */
  data: {
    username: '微信小程序'
  }
})
```

`Pages/index/index.wxml`

```html
<!--index.wxml-->
<view class="border">{{username}}</view>
```



### 修改数据

##### this.setData({})

- 微信小程序中经常需要用到`this.setData({})`把变量值渲染到视图层
- 介绍 : `setData`函数主要用于将逻辑层数据发送到视图层,同时对应的改变`this.data.x`的值
- 参数 : `Object`以`key:value`的形式表示,将`this.data`中的`key`对应的值改变成`value`



##### 工作原理

小程序的视图目前使用`WebView`作为渲染载体,而逻辑层是由独立的`javascriptCore`作为运行环境,在架构上,`webView`和`JavascriptCore`都是独立的模块,并不具备数据直接共享的通道,当前,视图层和逻辑层的数据据传输,实际上通过两边提供的`evaluteJavascript`所实现,即用户传输的数据,需要转换为字符串形式传递,同时把转换后的数据内容拼接成一份`JS` 脚本,再通过执行`JS` 脚本的形式传递到两边独立环境

而`evaluteJavascript`的执行会受到很多方面的影响,数据到达视图层并不是实时的

`Pages/index/index.js`

```js
Page({

  /**
   * 页面的初始数据
   */
  data: {
    username: '微信小程序'
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    // 重新编译后,如果不会执行这里的生命周期,需要再顶部点击清缓存,选择编译后的缓存
    console.log(' 生命周期函数--监听页面加载');
    setTimeout(() => {
      this.setData({
        username: '修改后的数据'
      })
    }, 3000)
  }
})
```

**注:重新编译后,如果不会执行这里的生命周期,需要再顶部点击清缓存,选择编译后的缓存**

