<!DOCTYPE html>
<html lang="en">

<head>
    <title>three.js canvas - panorama demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            background-color: rgb(200, 200, 200);
            margin: 0px;
            overflow: hidden;
        }

        #info {
            position: absolute;
            top: 0px;
            width: 100%;
            color: #ffffff;
            padding: 5px;
            font-family: Monospace;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
        }

        a {
            color: #ffffff;
        }
    </style>
</head>

<body>

    <div id="container"></div>
      <!-- js文件引入 -->
      <script src="./js/three.js-master/build/three.min.js"></script>

      <!--cdn 引入文件  -->
      <!-- https://cdnjs.com/ 搜索 threejs -->
      <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" referrerpolicy="no-referrer"> -->
      <!-- 引入帧率检测文件 -->
      <!-- <script src="../../js/node_modules/three/examples/js/libs/stats.min.js"></script> -->
      <!--
           node 中使用 导入
          import Stat from 'three/examples/jsm/libs/stats.module'
      -->
      <script src="./js/three.js-master/examples/js/libs/stats.min.js"></script>
      
      <!-- 引入鼠标交互文件 orbitcontrol-->
        <!-- 鼠标操作三维场景 -->
        <script src="./js/three.js-master/examples/js/controls/OrbitControls.js"></script>
         <!--
           node 中使用 导入
          import {OrbitControls}} from 'three/examples/jsm/controls/OrbitControls'
      -->
  
      </script>
      <script>
          // console.log(THREE);
          const w = window.innerWidth
          const h = window.innerHeight
          const stat = new Stats() //查看包 stats.min.js 中的变量可知为Stats
  
          // 将threejs 和照片中的房间相比较
          // 房间 -3d 容器
          //Scene( 场景)
          const scene = new THREE.Scene()
  
  
          // 坐标系   三边的长度
          const axes = new THREE.AxesHelper(2, 2, 2)
          // 添加到场景中
          scene.add(axes)
        //   网格
        const grid=new THREE.GridHelper()
        scene.add(grid)
  
  
  
  
          // 东西 -家电,家具...
          // 物体由: geometry(几何体,即骨架) + material(材质,即皮肤) 构成
          // BoxGeometry 立方体材质  长宽高
  
  
              // BoxGeometry 立方体材质  长宽高
              const geometry = new THREE.BoxGeometry(1, 1, 1)
              // 球型 半径
              // const geometry = new THREE.SphereGeometry(1)
              // 材质 ,这里我们使用 MeshBasicMaterial 最基础的材质
              // MeshBasicMaterial 基础材质,每个面都是一个颜色
              // const material = new THREE.MeshBasicMaterial()
              // const material = new THREE.MeshBasicMaterial({
              //     // color:'gold'    //给材质颜色
              //     color: 0xffffff * Math.random() //随机颜色
              // })
              // 根据每个面的法线,决定每个面的颜色
              const material = new THREE.MeshNormalMaterial({
                  // color:'gold'    //给材质颜色
                  color: 0xffffff * Math.random() //随机颜色
              })
              // cube (立方体) 骨架+材质
              cube = new THREE.Mesh(geometry, material)
              scene.add(cube) //加入到场景中
  
  
          // 光线 -台灯,吊灯,太阳光...
          // AmbientLight 创建环境光
          const light = new THREE.AmbientLight()
          scene.add(light)
  
          // 相机 -
          // 广泛使用的PerspectiveCamera 相机类型
          // 75  角度的范围 相机的看到宽高比 最近距离 最远距离
          const camera = new THREE.PerspectiveCamera(75, w / h, 0.1, 100)
          // 因为最初渲染的位置都是在0,0,0 上,相机和物体重合,相机拍摄不到物体
          // 需要调整相机位置
          camera.position.set(0, 0, 5) //x,y,z
          camera.lookAt(0, 0, 0) //相机朝向哪里
  
  
          // 渲染器- Renderer 计算机进行渲染数据
          // css 渲染器,canvas 渲染器,webGL 渲染器(我们用的)
          const renderer = new THREE.WebGLRenderer()
          // 设置渲染器的渲染的大小
          renderer.setSize(w, h)
          // 渲染场景和相机
          renderer.render(scene, camera)
          // 渲染器最终渲染出来的是一个canvas
          // 我们需要将渲染器添加到页面中
          document.body.append(renderer.domElement)
          // 将帧率检测添加到页面中
          document.body.append(stat.domElement)
          console.log(renderer
              .domElement); //canvas 画布 <canvas width="762" height="511" style="width: 762px; height: 511px;"></canvas>
  
  
          
          // 实例化鼠标交互
          // 如果不是在npm 中导入,而是使用直接使用本地文件的,应先查看本地文件
          // 内此文件的中的变量名是否为 THREE.OrbitControls,根据文件中的变量名来实例化
          // 参数 相机,renderer的canvas 元素
          // 实现放大,移动
          const orbitcontrol=new THREE.OrbitControls(camera,renderer.domElement)
  
  
  
  
          // threejs 本身提供了一个好用的对象处理此问题
          let clock = new THREE.Clock()
          // console.log(clock);
          // console.log(clock.getElapsedTime());
          function run() {
              let time = clock.getElapsedTime() //从 0 开始一直在增加的值
              // console.log(time);
  
              // 渲染场景和相机,每次改变都需要重新渲染视图
              renderer.render(scene, camera)
              stat.update() //实时更新帧率  fps 为分辨率 hz
              orbitcontrol.update()   //实时更新鼠标操作后的变化
              requestAnimationFrame(run)
          }
          run()


          window.onresize=function(){
            camera.aspect=w/h
            camera.updateProjectionMatrix()
            renderer.setSize( window.innerWidth, window.innerHeight );
            // renderer.render( scene, camera );
          }
      </script>
  
</body>

</html>