### 1.PostCSS 和CSS 模块

`PostCSS` 是一个用javaScript 工具和插件转换CSS 代码的工具,比如可以使用`Autoprefixer`插件自动获取浏览器的流行度和能够支持的属性,并根据这些数据帮我们自动的为CSS 规则添加前缀,将最新的CSS 语法转换成大多数浏览器都能理解的语法

`CSS 模块` 能让你永远不用担心命名太大众化而造成冲突,只要用最有意义的名字就行了

- **PostCSS**

  `PostCSS`与`webpack`结合,需要安装`style-loader`,`css-loader`,`postcss-loader` 三个loader:

  安装

  ```
  npm install style-loader css-loader postcss-loader -D
  ```

  `webpack.config.js`

  ```js
  module.exports={
      module:{
          rules:[
              {
                  test:/\.css$/,
                  exclude:/node_modules/,
                  use:[
                      {
                          loader:'style-loader',
                      },
                      {
                          loader:"css-loader",
                          options:{
                              module:true,   //开启css 模块,只有本模块中可以使用,相当于vue 的style 的scoped,可以import 导入css 文件为style,打印看看,是一个类,class 用 类.类名 表示,比如设置div 的class 为 style.box
                              importLoaders:1		//
                          }
                      },
                      {
                          loader:"postcss-loader"
                      }
                  ]
              }
          ]
      }
  }
  ```

  安装插件,加载样式的前缀

  ```
  npm install autoprefixer -D
  ```

  新建`postcss.config.js`

  ```js
  module.exports={
      plugins:[
          require('autoprefixer')			//为不同的浏览器配置不同的前缀,比如webkit-,ms-
      ]
  }
  ```

  配置package.json ,指定浏览器版本才能配置前缀

  ```json
  {
      //...
      "browserslist":[		//browserslist 也可以在根目录下创建 .browserslistrc 配置文件
          "> 1%",			//全球市场的使用率要大于1%
          "last 2 versions"	//浏览器最新的两个版本
      ]
  }
  ```

  安装`postcss-nested`,允许在样式里面写一些嵌套

  ```
  npm install postcss-nested -D
  ```

  `postcss.config.js`

  ```js
  module.exports={
      plugins:[
          require('autoprefixer'),			//为不同的浏览器配置不同的前缀,比如webkit-,ms-
          require('postcss-nested')
      ]
  }
  ```

  app.css

  ```css
  body{
      color:gold
      div{
      	color:purple        
      }
  }
  ```

  执行打包

  ```
  npx webpack
  ```

  执行热更新

  ```
  npx webpack server
  ```

  也可以部分开启CSS 模块模式,比如全局样式可以冠以`.global`前缀,如:

  *.global.css 普通模式

  *.css			css module 模式

  这里统一用global 关键词进行识别,用正则表达式匹配文件:

  ```js
  //css module
  {
      test:new RegExp(`^(?!.*\\.global).*\\.css`),
      exclude:[path.resolve(__dirname,'..','node_moudles')]
      use:[
          {
              loader:'style-loader',
          },
          {
              loader:"css-loader",
              options:{
                  modules:true,
                  localIndentName:'[hash:base64:6]'
              }
          },
          {
              loader:'postcss-loader'
          }
      ]
  }
  
  
  
  //普通模式
  {
      test:new RegExp(`^(.*\\.global).*\\.css`),
      exclude:[path.resolve(__dirname,'..','node_moudles')]
      use:[
          {
              loader:'style-loader',
          },
          {
              loader:"css-loader",
              options:{
                  modules:true,
                  localIndentName:'[hash:base64:6]'
              }
          },
          {
              loader:'postcss-loader'
          }
      ]
  }
  ```

  

