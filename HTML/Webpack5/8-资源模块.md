### 1.资源模块

**资源模块的四种类型**

1. `asset/resource`
   1. 发送单独的文件并导出URL
2. `asset/inline`
   1. 导出一个资源的Data URL
3. `asset/source`
   1. 会导出资源的源代码
4. `asset`
   1. 会在导出一个Data URL 和发送一个单独的文件之间自动进行选择

### 2.Resource 资源

修改`webpack.config.js` 配置文件,默认是将资源打包到dist 文件夹中

```js
module:{
	rules:[{
        test:/\.png$/,
        type:"asset/resource",
        generator:{		//也可以自定义资源打包位置,优先级高于output 中的自定义文件路径
            //filename:"image/test.png",	//打包到dist/image/test.png
            filename:"image/[contenthash][ext]",
        }
    }]
}
```

**自定义资源打包位置**

```js
output:{		//设置出口文件
		filename:'bundle.js',		//指定输出文件名 
		path:path.resolve(__dirname,'./dist'),			//指定输出路径,为绝对路径
        clean:true,					//清除上一次打包的内容
        //assetModuleFilename:"image/test.png",	 //自定义资源文件位置和名称,打包到dist/image/test.png
        ssetModuleFilename:"image/[contenthash][ext]",	//contenthash 表示根据文件的内容自动生成对应的哈希文件名,ext 表示生成对应文件的后缀名
},
```



`webpack.config.js` 配置文件

```js
const path=require('path')
const HtmlWebpackPlugin=require('html-webpack-plugin')

module.exports={
	entry:'./src/index.js',		//入口文件,./src/index.js 为项目下的文件
	output:{		//设置出口文件
		filename:'bundle.js',		//指定输出文件名 
		path:path.resolve(__dirname,'./dist'),			//指定输出路径,为绝对路径
        clean:true,					//清除上一次打包的内容
	},
	//mode:'none',   //暂时不指定模式
    mode:"developement",  // 开发模式	
	plugins:{		//插件
		//new HtmlWebpackPlugin(),		//自动生成index.html 并引入打包后的js 文件
        new HtmlWebpackPlugin({			//根据自己的模板生成index.html 文件
        	template:'./index.html',	//根据当前目录下的index.html 为模板
        	filename:'app.html',		//输出的文件名
        	inject:'body',				//在body 标签内引入打包后的js 文件
    }),
	},
    devtool:"inline-source-map",        //精准定位错误位置,定位到没有进行打包之前的源文件的错误位置
    devServer:{							//浏览器实时刷新功能
		static:'./dist'					//指定web 根目录位置
	},
    module:{
        rules:[
            {
                test:/\.png$/,
                type:"asset/resource"
        	}
        ]
	},
}
```

要打包的`js` 文件中

```js
import imgsrc from './img/1.png'
//获得导入的路径地址imgsrc
//将地址赋值给img 标签
img.src=imgsrc
```

**使用**

```
webpack-dev-server --open      //自动打开浏览器
```

### 3.inline 资源

修改`webpack.config.js` 配置文件,是不会将文件进行打包,dist 下没有产生新的文件,只将路径输出,输出base64 格式的图片路径

```js
module:{
	rules:[
        {
            test:/.svg$/',
            type:'asset/inline'
        }
    ]
}
```

要打包的`js` 文件中

```js
import imgsrc from './img/logo.svg'
//获得导入的路径地址imgsrc
//将地址赋值给img 标签
img.src=imgsrc
```

### 4.source 资源

`webpack` 时不会将资源打包到`dist `下,且显示源文件内容

`source `资源,导出资源的源代码,修改配置文件,添加:

```js
module:{
	rules:[
        {
            test:/.txt$/,
            type:'asset/source'
    	}
    ]
}
```

要打包的`js` 文件中

```js
import txt from './img/1.txt'
//获得导入的路径地址imgsrc
//将地址赋值给img 标签
div.innerHTML=txt
```

### 5.通用资源类型

通用资源类型`asset`,在导出一个data URL 和发送一个单独的文件之间自动选择

修改配置文件:

```js
module:{
	rules:[
        {
            test:/.jpg$/,
            type:'asset'
    	}
    ]
}
```

现在,`webpack` 将按照默认条件,自动的在`resource`和`inline`之间进行选择:小于 8kb 的文件,将会视为`inline`模块类型,否则会被视为`resource` 模块类型

可以通过在`webpack`配置的`module roules`层级中,设置`Roule.parser.dataUrlCondition.maxSize`选项修改次条件:

```js
module:{
	rules:[
        {
            test:/.jpg$/,
            type:'asset',
            parser:{
                dataUrlCondition:{
                    maxSize:4*1024   //4kb
                }
            }
    	}
    ]
}
```

