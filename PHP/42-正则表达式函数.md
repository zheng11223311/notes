### 1.正则表达式的函数

1. preg_grep() 返回与模式匹配的数组单元
2. preg_match() 进行一次正则表达式匹配 适合查询有没有
3. preg_match_all() 获取全部匹配的内容 适合查询有多少
4. preg_split() 用正则表达式分割字符串
5.  preg_replace() 用正则表达式替换字符串

1. **实例**

   ```php
   <?php
       //正则表达式的函数
       // preg_grep() 返回与模式匹配的数组单元
       // 参数1:传入要匹配的正则表达式
       // 参数2:要进行匹配的数组
       // 参数3:可选参数,0 返回匹配到的结果,1返回不匹配到的结果,默认为0
   
       $arr=array(1,'abc','2','c3c','d');
       $pattern='/\d/';
       $reslt=preg_grep($pattern,$arr,0);
       var_dump($reslt);
   
       // preg_match() 进行一次正则表达式匹配 适合查询有没有
     	// 参数1:传入要匹配的正则表达式
       // 参数2:要进行匹配的数组
       // 参数3:返回匹配到的结果
       $pattern='/\w/';
       $str='!a@$%^&&^*c&()b';
       $reslt=preg_match($pattern,$str,$match);
       var_dump($reslt);   //1
       var_dump($match);   //以数组形式 返回匹配到的值 [a]
   
   
       // preg_match_all() 获取全部匹配的内容 适合查询有多少
       $str='!a@$%^&&^*c&()b';
       $reslt=preg_match_all($pattern,$str,$match);
       var_dump($reslt);   //1
       var_dump($match);   //[a,b,c]
   
   
       // preg_split() 用正则表达式分割字符串
       $pattern='/\d/'; //数字
       $str='as1d2fg3hjk4l';
       $reslt=preg_split($pattern,$str);
       var_dump($reslt);   
   //     array (size=5)
   //   0 => string 'as' (length=2)
   //   1 => string 'd' (length=1)
   //   2 => string 'fg' (length=2)
   //   3 => string 'hjk' (length=3)
   //   4 => string 'l' (length=1)
   
       // preg_replace() 用正则表达式替换字符串
       $pattern='/\d/'; //数字
       $str='as1d2fg3hjk4l';
       $reslt=preg_replace($pattern,'☆',$str);
       var_dump($reslt);       //as☆d☆fg☆hjk☆l
   
       //替换数组
       $pattern='/aa/'; 
       $arr=array('aa','cccaa','bbaaacc','cccaa');
       $reslt=preg_replace($pattern,'☆',$arr);
       var_dump($reslt); 
   //     array (size=4)
   //   0 => string '☆' (length=3)
   //   1 => string 'ccc☆' (length=6)
   //   2 => string 'bb☆acc' (length=8)
   //   3 => string 'ccc☆' (length=6)
   
   //正则数组替换数组
   $pattern=array('/aa/','/cc/');
   $replce=array('★','☆');
   $arr=array('aa','cccaa','bbaaacc','cccaa');
   $reslt=preg_replace($pattern,$replce,$arr);
   var_dump($reslt); 
   // array (size=4)
   //   0 => string '★' (length=3)
   //   1 => string '☆c★' (length=7)
   //   2 => string 'bb★a☆' (length=9)
   //   3 => string '☆c★' (length=7)
?>
   
```
   
**preg_replace 实例**
   
   改变字体大小和颜色等

   $1 或\1 代表引用第一个() 匹配到的数据,
   注意\1 中\在双引号里面会被被解析,在双引号里边要多加\,为\\1
   
   ```php
   <?php
   $str='[b][size=7]学习园地[/size],成就[color=gold]自己[/color]的只需要一套[color=gold][del]精品[/del][/color][/b]';
   echo $str."<br/>";
   //正则数组替换数组
   $pattern=array(
       '/\[b\](.*?)\[\/b\]/',
       '/\[size=(.*?)\](.*?)\[\/size\]/',
       '/\[color=(.*?)\](.*?)\[\/color\]/',
       '/\[del\](.*?)\[\/del\]/',
   );
   //$1 或\1 代表引用第一个() 匹配到的数据,
   //注意\1 中\在双引号里面会被被解析,在双引号里边要多加\,为\\1
   $replce=array(
       '<b>$1</b>',
       '<font size=\1>\2</font>',	//匹配第二个数组下标值的对应的括号,不会匹配到数组第一个下标值的括号
       '<font color=\1>\2</font>',
       '<del>\1</del>',
   );
   $reslt=preg_replace($pattern,$replce,$str);
   echo $reslt;	
   var_dump($reslt); 

   ?>
   ```
   
   ![image-20211021154710051](D:\学习\wanye\PHP\img\image-20211021154710051.png)

