### 1.-路由组件的安装及配置

**1.修改apache 配置文件httpd.conf (必须修改将项目目录设置为根目录,因为路由组件需要网址在根目录下执行)**

路径:C:\wamp64\bin\apache\apache2.4.37\conf 下httpd.conf

**找到apache 配置文件**

方法一:在Wampserver64  左键显示 Apache 显示httpd.config 文件

方法二:在安装的wamp64 路径下,找到/wamp64 /bin/apache/apache2.4.41/conf/httpd.config 文件

打开httpd.config  文件

查找找到Include conf/extra/httpd-vhosts.conf(代表着在conf/extra/下开启了虚拟主机),如果前面有#注释,删除#注释,即开启apache 配置文件

**在conf/extra/找到httpd-vhosts.config 文件**

复制内容,在粘贴一份

修改复制的内容

Servername localhost 修改为Servername xxxx(自己要取的域名)

ServerAlias localhost 修改为ServerAlias xxxx(自己要取的域名,同上)

```config
<VirtualHost *:80>
  ServerName localhost
  ServerAlias localhost
  DocumentRoot "${INSTALL_DIR}/www"
  <Directory "${INSTALL_DIR}/www/">
    Options +Indexes +Includes +FollowSymLinks +MultiViews
    AllowOverride All
    Require local
  </Directory>
</VirtualHost>

<VirtualHost *:80>	端口号
  ServerName yyqx.com	域名
  ServerAlias yyqx.com	域名
  DocumentRoot "${INSTALL_DIR}/sdasd"		在本地管理的服务器的跟路径(需要管理的目录)
  <Directory "${INSTALL_DIR}/sdasd/">		子目录的配置,可有可无
    Options +Indexes +Includes +FollowSymLinks +MultiViews
    AllowOverride All
    Require local
  </Directory>
</VirtualHost>
```

​	**将域名绑定ip**

**找到系统配置文件**

在c 盘/windows/System32/drivers/etc/hosts(需要权限,属性修改写入权限)

打开文件

```
#
127.0.0.1 localhost
::1 localhost
```

**绑定自己的域名**

```
#
127.0.0.1 localhost
::1 localhost
127.0.0.1 yyqx.com
```

**重启wamp 软件**

### 2.环境搭建

- 配置虚拟主机

- 使用Composer 包管理工具搭建自己的项目框架

  - ```
    https://getcomposer.org/download/         下载Composer 
    https://www.phpcomposer.com/			composer 中文文档
    https://blog.csdn.net/robin_sky/article/details/108130963   安装步骤
    ```

    composer 常用命令:[(22条消息) Composer 的常用命令_彳亍-CSDN博客_composer命令](https://blog.csdn.net/lamp_yang_3533/article/details/80233156)

- 包下载工具:[[Packagist](https://packagist.org/)](https://twig.symfony.com/doc/3.x/intro.html)

- 加载路由组件 noahbuscher/macaw  地址: [noahbuscher/macaw - Packagist](https://packagist.org/packages/noahbuscher/macaw)

- 第一次安装会报错,产生composer.json 文件

  - ```
    composer require noahbuscher/macaw    安装命令,项目根目录下执行,报错执行带版本号的
    composer require noahbuscher/macaw:dev-master
    ```

    

- 配置Composer 配置文件

- 加载模板引擎组件 twig/twig

  - 见下一章,以下同理

- 加载ORM 组件 catfan/medoo

- 加载文件上传组件 slince/upload

- 加载图片缩放组件 Gregwar/Image

- 加载分页组件 jasongrimes/paginator

- 加载验证码组件 gregwar/captcha

- 加载分类处理组件 lmonkey/capttree

**composer 安装及基本使用**

**根目录下index.php**

```php
<!-- 主入口文件 -->
<?php
// 包含路由组件
require('vendor/autoload.php');
// 包含
use \NoahBuscher\Macaw\Macaw;

// Macaw::get('/', function() {
//     echo '这是主页目录';
//   });
//   // 配置.htaccess 路由规则 才能访问到
// Macaw::get('/goods', function() {
//     echo '这是商品目录';
//   });



  // 命名空间 yyqxx/app/controllers/admin/admin@index admin类下的index 方法(命名空间下的amdin)
  // 需要在根目录下的composer.json 配置路由才能识别这个类的路径
  // Macaw 下的composer.json 配置无效,不要搞错
  // "autoload": {
	// 	"psr-4": { 
	// 		"NoahBuscher\\Macaw\\": "./",
	// 		"yyqx\\app\\":"app/"  当访问到yyqx\\app\\ 下,路径指向app下面 ,\\表示转义成\
	// 	 }
	// }
  // 配置后需要在根目录下执行命令composer dump-autoload 重新加载
  // 返回结果
  // Generating autoload files
  // Generated autoload files
  // 在 composer 下的autoload_psr4.php 会加载这个配置,执行命令才会重新加载
  // 加载出'yyqx\\app\\' => array($baseDir . '/app'),
  // 后台
  $admin='yyqx\app\controllers\admin\\';
  // 前台
  $web='yyqx\app\controllers\web\\';
Macaw::get('/admin', $admin.'admin@index');
Macaw::get('/admin/show', $admin.'admin@show');

Macaw::get('/',$web.'index@show');

Macaw::dispatch();
?>

```

**根目录下composer.json 文件(是根目录下的json,不是其他文件夹下的json 文件)**

```json
{
    "require": {
        "noahbuscher/macaw": "dev-master"
    },
    "autoload": {
		"psr-4": { 
			"yyqx\\app\\":"app/"	//表示访问命名空间yyqx\app,直接访问到 app目录下  \\表示转义\
		 }
	}
}
```

**web-project(即根目录)\vendor\composer\autoload_psr4.php**

```
<?php
//这里是将所有的 composer.json 文件解析到这里
// autoload_psr4.php @generated by Composer

$vendorDir = dirname(dirname(__FILE__));
$baseDir = dirname($vendorDir);

return array(
    'yyqx\\app\\' => array($baseDir . '/app'),  //根目录下的composer.json,被解析到这里
    'NoahBuscher\\Macaw\\' => array($vendorDir . '/noahbuscher/macaw'), //Macaw 下的composer.json
);

```

**根目录/app/controllers/admin/admin.php 文件**

```php
<?php
    //后台主页
namespace yyqx\app\controllers\admin;

class admin{
    function index(){
        echo '后台显示首页的方法';
    }
    function show(){
        echo '后台显示其他信息的方法';
    }
}
?>
```

**根目录/app/controllers/web/index.php 文件**

```php
<?php
namespace yyqx\app\controllers\web;

class index{
    function show(){
        echo '这是显示前台的方法';
    }
}
?>
```

