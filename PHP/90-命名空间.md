### 1.命名空间

**1.什么是命名空间**

1. 将代码划分不同的区域,每个区域的常量,函数和类的名字互不影响

**2.命名空间的主要作用:用来解决重名问题**

**3.命名空间的基本应用**

1. 定义命名空间使用namespace 关键字声明
2. namespace 需要写在PHP 脚本的顶部,必须是第一个PHP 指令,不要在namespace 前面出现非PHP 代码,HTML 或者空格
3. 从定义namespace 出现开始,到下一个namespace 出现之前或者脚本运行结束时都是一个独立的空间
   1. **注意:如果为相同代码定义多个命名空间是不可能的,只能被最后一个包含**
4. 在同一个文件中可以定义不同的命名空间
5. 如果在当前空间中需要调用另外空间的内容,需要使用类似文件路径的语法, '\空间名\元素名' 对于类,常量以及函数的用法都是一样的
6. 命名空间可以定义子空间,并且子空间也是可以定义多层空间,一般定义多层子空间时建议使用公司的域名倒置在加上项目名称组合而成
7. 使用define 定义的常量归公共空间所有,不归命名空间所有,归命名空间所有的常量只能用const 来声明,因此define 定义的常量可以所有空间使用
8. 变量和函数会在同一命名空间内有变量提升/函数提升,但是命名空间没有提升,按照先后顺序加载命名空间,所以先定义的命名空间不能使用后定义的命名空间里面的变量
9. 什么是公共空间:
   1. 没有定义命名空间的函数,类,常量都是归属于公共空间
   2. **注意:公共空间的代码被引入到某个命名空间下以后,该公共空间中的代码不属于任何命名空间内,依然还是属于公共空间**
10. 如果在命名空间中需要调用公共空间的元素,可以通过  \元素名   方式来调用

```php
<?php
    // echo '1';
 namespace a;   //namespace 前面不能由任何的代码,namespace 可以不顶格写,旧版本必须顶格写
    const XXYD='a 中的学习园地<br/>';
    function demo(){
        echo '我是a 中的方法';
    }
    class aa{
        public $name='aa';
    }
    echo XXYD;
    echo '<hr/>';
 namespace a1;   //namespace 上一个命名空间结束,下一个命名空间开始
    const XXYD='a1 中的学习园地<br/>';
    echo XXYD;
    echo '<hr/>';
    namespace a2; 
    namespace a3; 
    namespace a4;
    const XXYD='a4 中的学习园地<br/>';      //这个代码不归a2,a3,只归a4 所有
    echo XXYD;

//使用其他命名空间的属性/方法
echo \a\XXYD;       //  \a       \表示根
echo \a\demo();
var_dump(new \a\aa);

// 子命名空间
// cart order  都属于xxyd,
namespace xxyd\cart;
class Test{
    public $name='我是cart';
}
namespace xxyd\order;
class Test{
    public $name='我是order';
}
var_dump(new \xxyd\cart\Test());    //有构造方法需要传参时加上(),不传参也可以加()

// 还可以多级命名
namespace xxyd\order\a\a\c\c;
// 一般的命名空间使用域名倒置的方法,避免重复
define('AAA','aaa');
namespace com\lmonkey\www\project;
// const 与define 定义的常量区别时define 定义的常量时全局的,不能重复定义
echo AAA;

// 在命名空间中引用公共空间的变量
// 引用过来的变量不属于命名空间所有,依然是公共空间所有
include './1-php copy 84.php';
// $a=new  a;   //报错
// var_dump($a);

// 正确调用
$a=new  \a; //引入到这个文件中的根目录下,不是在命名空间下,
// 其他命名空间也可以使用这个类,相当于define的全局作用,需要命名空间的注意先后顺序
var_dump($a);

?>

```

**4.命名空间中的名称和术语:**

**非限定名称**	不包含前缀的类名称,比如:$u=new User()  如果当前命名空间是com/lmonkey .		User 会被解析为com\lmonkey\User.  如果使用User 的代码在公共空间中,则会被解析为User(当前文件夹)

**限定名称**  	包含前缀的名称,比如:$u=new User() 	如果当前的命名空间是com,则User 会被解析为com\xxyd\User.  	如果使用User 的代码在公共空间中,则User 会被解析为User(相对路径)

**完全限定名称**  包含了全局前缀操作符得名称,比如:$u=new \xxyd\User()	User() 总是被解析为xxyd\User, 即从,根目录下的xxyd 下查找(绝对路径)

```php
<?php
namespace com\lmonkey;
// 非限定名称
class User{
    public $name='我是命名空间中的';
}
$a=new User;    //被解析到当前命名空间下得User
var_dump($a);

namespace com;
class User{
    public $name='我是com 下的User';
}
$a=new lmonkey\User();  //被解析为com\lmonkey下得User
var_dump($a);

$a1=new \com\User();  //被解析为com下得User
var_dump($a1);
?>

```

**5.别名与导入**

1. 使用use 关键字后面跟命名空间名称可以指定导入该命名空间
2. 也是使用as 操作符对命名空间或者命名空间中的类进行重命名操作
3. 在使用use 进行导入时,当前空间有相同的名字的元素时,将会发出错误
4. 同一个namespace 导入类,函数和常量必须通过多个use 语句一个一个导入,从PHP 7 开始.可以使用use 语句一次性导入一种类型
   1. **注意:如果使用use 导入函数,需要加function ,如果导入常量需要加const,导入类时不需要加关键字**
   2. 除了使用别名和导入还可以通过namespace 关键字和\_\_NAMESPACE\_\_ 魔术常量动态的访问元素,其中namespace 关键字表示当前空间,而魔术常量的值是当前空间的名称

```php
<?php
namespace com\lmonkey;
// 非限定名称
class User{
    public $name='我是命名空间中的';
}
namespace com\lmonkey\cc;
// 非限定名称
class User{
    public $name='我是命名空间中的 cc';
}
namespace xxyd;
//导入一个命名空间  ,被导入的命名空间必须在此页面上有
use com\lmonkey;    //相当于将com 下的lmonkey文件夹 导入进来,并没有导入com 文件夹
use com\lmonkey\cc; //相当于将com 下的lmonkey 下的cc 文件夹导入进来,并没有导入com 和lmonkey 文件夹
// 导入命名空间后可使用限定名称调用元素
// $a=new com\lmonkey\User();      //报错
// 路径字母可大写
$a=new lmonkey\User();  
$a1=new LMONKEY\User();  
$a1=new Lmonkey\User();  
var_dump($a);   //我是命名空间中的
var_dump($a1);  //我是命名空间中的

// $a2=new  com\lmonkey\cc\User();  //报错,没有 \ ,即在xxyd\com\lmonkey\cc 下
$a2=new  \com\lmonkey\cc\User();  //不报错,因为这是 \ 下的

$a2=new cc\User();  
$a3=new CC\User();  
var_dump($a2);  //我是命名空间中的 cc
var_dump($a3);  //我是命名空间中的 cc

namespace xxyd1;
// as语法为命名空间起别名
use com\lmonkey as a;   //起别名
$a3=new a\User(); 
var_dump($a3); //我是命名空间中的

// as语法为类起别名
use com\lmonkey\User as lei;
$a1=new lei(); 
var_dump($a1); //我是命名空间中的
?>

```

**多个导入**

```php
<?php
namespace com\lmonkey;
class A{
    public $name='我是命名空间中的';
}
class B{
    public $name='我是命名空间中的';
}
class C{
    public $name='我是命名空间中的';
}
function A(){
    echo '我是函数';
}
const A='aaa';
namespace xxyd;
use com\lmonkey\A;    //导入A 类
use const com\lmonkey\A;   //导入常量A,常量定义不会先执行,有先后顺序,但是函数与变量会提升,没有先后顺序,可以先使用
use function com\lmonkey\A;   //导入函数A

$a=new A;
var_dump($a);
echo A; //aaa
A();//我是函数

//PHP 7 开始支持一次性导入多个
use com\lmonkey\{A,B,C as cc};        //导入A,B,C 类,且可以取别名
// use function com\lmonkey\{A as cc,B,C };        //导入A,B,C 函数,且可以取别名
// use const com\lmonkey\{A,B,C as cc};        //导入A,B,C 常量,且可以取别名
?>

```

**魔术常量**

```php
<?php
// 魔术常量 __NAMESPACE__
namespace com\lmonkey;
const PATH='./com/lmonkey';
class User{
    public $name='dddd';
}

echo namespace\PATH;    //namespace 关键字表示当前空间      //  ./com/lmonkey
var_dump(new namespace\User);

echo __NAMESPACE__; //  com/lmonkey

$u=__NAMESPACE__.'\\User';  
var_dump($u);   //   'com\lmonkey\User'

$aa=new $u;
var_dump($aa);
?>

```

