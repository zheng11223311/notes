### 1.设置及获取属性

**1.PDO 类**

```php
__construct(string $dsn [,string $username [,string $password [,array $driver_options]]])
beginTransaction(void):bool		//开启事物处理
commit(void):bool	//提交事物
inTransaction(void):bool	//检测是否在事物当中
rollBack(void):bool	//回滚事务

errorCode(void):mixed	//错误代码    
public errorInfo(void):int	//错误信息
exec(string $statement) :int	//执行增删改SQL 语句
static getAvailableDrivers(void):array  //获取PDO 支持的数据库类型
lastInsertId([string $name=NULL]):string 	//获取上一次插入操作的ID
public prepare(string $statement [,array $driver_options=array()]) :PDOStatement  //获得预处理对象
public query(string $statement):PDOStatement //执行查询语句SQL 语句
public quote(string $string [,int $parameter_type=PDO::PARAM_STR]) :string //字符串转义  
getAttribute(int $aattribute):mixed //获取属性
setAttribute(int $aattribute,mixed $value): //设置属性 
```

**get 属性**

```php
<?php
try {
    $dsn='mysql:host=localhost;dbname=lmonkey;charset=utf8';
    $pdo=new PDO($dsn,'root','');
   //  获取属性
    //是否开启事务自动提交,事务操作时不需要自动提交
   // echo $pdo->getAttribute(PDO::ATTR_AUTOCOMMIT); //1 开启
   // 获取大小写设置
   // echo $pdo->getAttribute(PDO::ATTR_CASE); //0
   // 获取客户端信息
   // echo $pdo->getAttribute(PDO::ATTR_CLIENT_VERSION); //mysqlnd 5.0.12-dev - 20150407 - $Id: 38fea24f2847fa7519001be390c98ae0acafe387 $
   // 获取连接的状态
   // echo $pdo->getAttribute(PDO::ATTR_CONNECTION_STATUS); //localhost via TCP/IP
   //获取驱动的名称
   // echo $pdo->getAttribute(PDO::ATTR_DRIVER_NAME); //mysql
   // 获取错误模式
   // echo $pdo->getAttribute(PDO::ATTR_ERRMODE); //0
   // 获取oracle 空值转换设置,在oracle 数据库中有效
   // echo $pdo->getAttribute(PDO::ATTR_ORACLE_NULLS); //0
   // 获取当前连接是否为持久连接,持久连接耗费资源
   // var_dump($pdo->getAttribute(PDO::ATTR_PERSISTENT)) ; //false
   // 获取数据的预计大小,mysql 不支持
   // echo $pdo->getAttribute(PDO::ATTR_PREFETCH); //报错
   // 获取超时设置,mysql 不支持
   // echo $pdo->getAttribute(PDO::ATTR_TIMEOUT); //报错
   // 查看服务器信息
   // echo $pdo->getAttribute(PDO::ATTR_SERVER_INFO); 
   // Uptime: 509436 Threads:
   //  1 Questions: 999 Slow queries: 0 
   // Opens: 152 Flush tables: 1 Open tables:
   //  145 Queries per second avg: 0.001Uptime: 
   // 509436 Threads: 1 Questions: 1000 Slow queries: 
   // 0 Opens: 152 Flush tables: 1 Open tables: 
   // 145 Queries per second avg: 0.001

   // 获取服务器版本,MariaDB(mysql 的高级版本) 多显示一个MariaDB
   echo $pdo->getAttribute(PDO::ATTR_SERVER_VERSION); //5.7.24
} catch (PDOException $e) {
    echo $e->getMessage();
}

?>
```

**set 属性**

```php
<?php
try {
    $dsn='mysql:host=localhost;dbname=lmonkey;charset=utf8';
    $pdo=new PDO($dsn,'root','');
    // 设置属性
//    $pdo->setAttribute(PDO::ATTR_CASE,PDO::CASE_LOWER);  //转小写类型
    // echo   $pdo->getAttribute(PDO::ATTR_CASE);   //2
    // $pdo->setAttribute(PDO::ATTR_CASE,PDO::CASE_NATURAL);  //返回原有类型
    // echo   $pdo->getAttribute(PDO::ATTR_CASE);   //0
    // $pdo->setAttribute(PDO::ATTR_CASE,PDO::CASE_UPPER);  //转大写类型
    // echo   $pdo->getAttribute(PDO::ATTR_CASE);   //1

    // 设置错误模式,默认是0 ( 即ERRMODE_SILENT),寂静模式,有错误不输出
    // $pdo->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_SILENT);
    // $pdo->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_WARNING); 引发warning 警告
    // $pdo->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION); 抛出exceptions异常
    // echo   $pdo->getAttribute(PDO::ATTR_ERRMODE);  //0
    // $pdo->query("SELECT abc from abc"); //错误不输出
    //显示错误代码
    // echo $pdo->errorCode();//042S02
    // 显示错误内容
    // var_dump($pdo->errorInfo());
    // array (size=3)
//   0 => string '42S02' (length=5)
//   1 => int 1146
//   2 => string 'Table 'lmonkey.abc' doesn't exist' (length=33)


// 设置自动提交
$pdo->setAttribute(PDO::ATTR_AUTOCOMMIT,false); 
echo   $pdo->getAttribute(PDO::ATTR_AUTOCOMMIT);  //0 关闭
} catch (PDOException $e) {
    echo $e->getMessage();
}

?>
```

