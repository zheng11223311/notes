### 1.进程与服务管理

管理进程

**1.判断 Linux 系统是否足够健康**

```shell
ps aux   #查看系统进程 ,a 代表所有, u 代表显示进程的用户名,x 代表显示后台进程
#显示
#USER   PID    %CPU       %MEM       VSZ      RSS           TTY   STAT       START      
#用户    id 号  cpu 使用率   内存使用率  虚拟内存	固定内存的占用	 终端   现在的状态  进程开始的时间
#TIME        COMMAND
#运行多长时间   进程本身的命令
```

```shell
pstree   #进程树
#显示
#init  #主进程,它的分支下为服务,如:
#httpd   #apache 服务器
#sshd	#远程管理的服务

top   #查看系统的负载(运行情况)
#显示
#top - 10:39:43 up 8:43,2 users ,       load average:0.00,0.01,0.05
#命令本身,运行多久,运行时间,正在登入的用户个数,  平均负载 分别为1分钟的负载,5分钟的负载,10分钟的负载
#Cpu(s):   0.0%us, 0.3%sy,0.0%nl,99.3%id,0.0%wa,0.0%hi,0.3%si,0.0%st
#cpu 的使用率,前面为使用率 ,id 空闲率
#Mem:1030344k total,758076k used,272268k free, 56936k buffers
#内存的使用率, 1G内存,使用700M,空闲200M
#Swap:2047996k total,0k used,2047996k free,525032k cached
#交换分区:2G,0G 被使用,2G 空闲,
#USER   PID   PR    NI   VIRT   RES  SHR  S     %CPU       %MEM  
#用户    id 号                                    cpu 使用率   内存使用率  
#TIME+        COMMAND
#运行多长时间   进程本身的命令

#键入P 可进行对%cpu 使用率排序
#键入M 可进行对%MEM 使用率排序
#键入q 退出
```

### 2.终止进程

**kill**

**killall**

```shell
px aus     #查看进程
kill +PID  #根据PID 终止进程
kill -9 99121   #-9 表示强制终止
```

```shell
pstree     #查看进程树
kill +服务名    #终止当前服务及其所有子服务
kill -9 httpd   #-9 强制终止,终止apache 服务器,其下所有子进程树都会被终止
pstree   #再次查看,httpd 被终止
```

### 3.服务的管理

**分类**

- 二进制包安装的服务
- 源码包安装的服务

**二进制包安装的服务管理方法**

手动管理

```shell
cd /etc/rc.d/init.d/		#.d 代表和服务相关
ls   #查看
#显示绿色的都是系统默认安装的服务
/etc/rc.d/init.d/sshd start    #管理/etc/rc.d/init.d/ 下的sshd 服务器,start 表示开启这个服务,stop 表示关闭,restart 表示重启,status 查看状态,是否正在运行

#使用service 命令操作,与上方参数一样,效果一样
service sshd start  #开启sshd,stop 表示关闭,restart 表示重启,status 查看状态,是否正在运行
```

**开机自启动**

```shell
chkconfig +服务名 on |off  #on 开启服务,off 不开启服务
chkconfig  sshd  on   #开机自动开启sshd

#以文件形式开启
vim /etc/rc.local    #打开开机启动文本
#新行写入/etc/rc.d/init.d/sshd start   #开机自动执行这个命令
```

**源码包安装的服务**

手动管理

```shell
/usr/local/apache2/bin/apacheclt  start |stop |restart    #源码包不能通过status 查看是否运行,使用pstree 查看是否运行
```

开机自启动

```shell
vim/etc/rc.local
/usr/local/apache2/bin/apacheclt start
```

