### 1.变量函数

当一个变量的值是某个函数的名称的字符串时,我们可以使用变量名() 的方式调用对应名称的函数,这种调用方式就是变量函数

**例子:**

```php
<?php
//可变变量
$xxyd='lmonkey';
$lmonekey='学习园地';
echo $$xxysd;	//学习园地

//变量函数
//定义一个变量
$func='fn';
$func();	//fn()
fn(){
    echo '与可变变量相似'
}
?>
```

### 2.回调函数

回调函数只是变量函数的一种变量,本质上还是变量函数的应用

在一个函数(A 函数)中,通过变量函数的方式$var() 调用另外一个函数(B 函数,C 函数),而其函数的名称通过A 函数的参数传递进来,这种方式就是回调函数,因为函数A 中的变量函数$var(),会根据用户传入不同的实参回过头调用不同名称的其他函数

```php
function a($var){
	$var();	//回调函数要素1,变量函数
}
a('b')	//在a 函数中调用b 函数 回调函数要素2,传入函数名称字符串
```



```php
<?php
//定义函数
function write($func){
    //变量函出现
    $func();
}

//定义一堆函数
function writeA(){
    echo 'AAAA';
}

//定义一堆函数
function writeB(){
    echo 'BBBB';
}
//定义一堆函数
function writeC(){
    echo 'CCCC';
}

//回调函数的出现
write('writeA');	//AAAA
write('writeB');	//BBBB
write('writeC');	//CCCC
?>
```

**过滤函数也使用了回调函数**

```php
<?php
//默认删除为 false 的值
$arr=array(1,1.1,0,'','hhh',true,false);
var_dump($arr);	//1,1.1,0,'','hhh',true,false
$newArr=array_filter($arr);
var_dump($newArr);	//1,1.1,'hhh',true


//根据回调函数返回的值,决定是否删除
$arr=array(1,1.1,0,'','hhh',true,false);
$newArr=array_filter($arr,'func');
function func($v){
    if($v==1){
        return false;
    }else{
        return true;
    }
}
var_dump($newArr);	//1.1,0,'','hhh',true,false
?>
```

### 3.内部函数(了解)

什么是内部函数,在函数内部声明的函数就是内部函数

1. 在函数外部是否可以调用内部函数
   1. 不可以直接调用,但是如果调用外部函数之后,就可以任意调用内部函数
2. 在函数内部是否可以调用内部函数
   1. 可以调用,但是必须在内部函数定义之后调用,因为PHP 解析器只会加载外部函数并不会执行外部函数,所以不知道外部函数中还有内部函数

```php
<?php
function outer(){
    //在outer 函数内部再定义一个函数(内部函数)
    //inner();	报错,没有此函数==>因为PHP 解析器只是预先加载函数并没有执行outer 函数,所以不知道内部情况,内部的函数没有被PHP 解析,没有函数提升
    function inner(){
        echo "####";
    }
    inner();		//####   可以被执行
}

//inner()  函数外部无法调用内部函数
outer();

//外部函数如何调用内部函数
//先调用外部函数,才可以调用内部函数
outer();
inner();
?>
```

### 4.递归函数

在一个函数中调用当前函数本身,这种格式就是递归函数

```php
<?php
function num($num){
    echo $num;
    if($num>0){
        //调用自己 函数再执行
        num($num-1);
    }else{
        echo '<hr/>';
    }
    echo $num;
}
num(3)	//2,1,0,hr,0,1,2
?>
```

### 5.匿名函数

如果声明一个函数,而该函数没有函数名,那么这个函数就匿名函数

用法:用变量接收匿名函数

```php
变量名=function(){
	函数体
};	//注意这里必须有分号结束; 因为匿名函数属于表达式
```



```php
<?php
$num=function (){
    echo "我是匿名函数";
};	//匿名函数后面要加; 不属于函数,属于object 类型
$num();
?>
```

### 6.闭包函数(了解)

在子函数内部使用通过use 关键字使用父函数的变量,这种方式就是闭包函数

**格式:**

```php
function 父函数(){
	//父函数的局部变量
	$var=值;
	//声明匿名函数并且使用use 格式实现闭包
	变量=function() use(父元素变量$var){
	
	};
	变量()
}
父函数();
```



```php
<?php
$pph="这是页面级的变量";
function father(){
    //父函数的一个局部变量
    $pph='自创手术';
    function son(){
        global $pph;
        echo $pph;	//这是页面级的变量
    }
    son();
}
father();
?>
```

只能使用匿名函数实现闭包

```php
<?php
//使用匿名函数实现闭包函数
$pph="这是页面级的变量";
function father(){
    //父函数的一个局部变量
    $pph='自创手术';
    $son=function () use($pph){
        echo $pph;	//自创手术
    };
    //调用内部函数
    $son();
}
father();
?>
```

### 7.匿名回调

匿名回调格式:调用函数(传入匿名函数)

回调函数的区别:

1. 以字符串方式传入
2. 以匿名函数方式传入的回调函数
3. 字符串方式传入的回调函数,该函数可以使用多次,任意调用,因为这是一个预先加载的普通函数,匿名函数传入的回调函数只可以在当前回调函数中使用,其他地方无法使用
4. 匿名函数的回调函数方式效率高,因为回调函数运行完毕,匿名函数即被回收,而字符串方式传入的函数由于是预先加载的普通函数,所以在页面没有执行完毕时,永不消失

```php
<?php
    //以匿名函数方式传入的回调函数
js(function($no1,$no2){return $no1+$no2;});
?>
```

**array_map 匿名回调的使用**

```php
<?php
// 对元素值进行操作
$arr=array(1,1.1,0,'','hhh',true,false);
$newArr=array_map('func',$arr);
function func($v){
    if($v==1){
        return $v+=2;
    }
}
var_dump($newArr);	//3,1.1,0,'','hhh',true,false

//匿名回调
$newArr=array_map(function(){
     if($v==1){
        return $v+=2;
    }
},$arr);
var_dump($newArr);	//3,1.1,0,'','hhh',true,false
?>
```

### 8.可变长度参数列表

```php
<?php
// 定义一个函数
function demo($no1,$no2){
    //获取传入的所有实参值,返回一个数组
    $args=func_get_args();
    var_dump($args);	//[1,2,3,4,5,6,7]
   return $no1+$no2;
}
demo(1,2,3,4,5,6,7)		//实参数量可以大于形参,形参数量也可以大于实参,但是没有对用实参的 形参 不能被使用,会报错
?>
```

**array_unshift() 的使用**

```php
<?php
//array_unshift()
//作用:在数组的开头(数组下标会重新从0开始排序)插入一个或多个元素,改变原来数组
//参数:
//	参数1:要插入数据的数组变量
//	参数2:要插入数组的元素(可多个)
//返回值:新数组的长度
$arr=array('a','b');
array_unshift($arr,'年后','学习园地','哈哈哈');
var_dump($arr);		//['年后','学习园地','哈哈哈','a','b']
?>
```

**array_push() 的使用**

```php
<?php
//array_push()
//作用:在数组的末尾(下标会随着数组最后下标(如果是字符串数字的下标数值也会转成数字型下标计算)的值+1)插入一个或多个元素,改变原来数组
//参数:
//	参数1:要插入数据的数组变量
//	参数2:要插入数组的元素(可多个)
//返回值:新数组的长度
$arr=array('a','b');
array_push($arr,'年后','学习园地','哈哈哈');
var_dump($arr);		//['a','b','年后','学习园地','哈哈哈']
?>
```

