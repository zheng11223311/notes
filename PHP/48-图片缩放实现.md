### 1.图片缩放实现

```php
<?php
//实现图片缩放

//1.打开原图作为画布
$img=imagecreatefromjpeg('./img/1.jpg');
// 获取原图的宽高   
$width=imagesx($img);
$height=imagesy($img);
// var_dump($width.'-'.$height);
//2.定义缩放的大小
$w=100;
$h=100;
    //定义等比例缩放的公式
    if($width>$height){
        $dh=$h;
        $dw=$width*($h/$height);
    }else{
        $dw=$w;
        $dh=$height*($w/$width);
    }
//3.通过缩放的大小创建指定的画布
$newImg=imagecreatetruecolor($w,$h);
//4.从新采样将图片拷贝到新的画布中(原图的宽高)
    //目标资源 原图资源 目标点开始位置 原图点开始位置 目标图宽高 原图宽高
$copy=imagecopyresampled($newImg,$img,0,0,0,0,$dw,$dh,$width,$height);
//5.告诉浏览器图片相关的信息,jpg 既是jpeg 图像
header('Content-type:image/jpeg');
//6.保存图像    要保存的图片,保存位置(没有保存位置时,浏览器显示图片,有则不显示图片,且不用告诉浏览器信息)
imagejpeg($newImg,'./img/a.jpg');   
//释放资源
imagedestroy($img);
imagedestroy($newImg);
    
?>

```

**封装函数缩放图片**

```php
<?php
thumb('./img/1.jpg','img',100,100);
//实现图片缩放函数
function thumb($srcImage,$path,$w,$h,$pre='s_'){
    //0.判断用户传入的图片是什么类型
    //是什么类型就用什么函数
        //获取传入文件的后缀.jpg .jpeg .png .gif
        $suffix=ltrim(strrchr($srcImage,'.'),'.');
    if($suffix==='jpg'){
        $suffix='jpeg';
    }
    $func='imagecreatefrom'.$suffix;
//1.打开原图作为画布
$img=$func($srcImage);
// 获取原图的宽高   
$width=imagesx($img);
$height=imagesy($img);
    //定义等比例缩放的公式
    if($width>$height){
        $dh=$h;
        $dw=$width*($h/$height);
    }else{
        $dw=$w;
        $dh=$height*($w/$width);
    }
//3.通过缩放的大小创建指定的画布
$newImg=imagecreatetruecolor($w,$h);
//4.从新采样将图片拷贝到新的画布中(原图的宽高)
    //目标资源 原图资源 目标点开始位置 原图点开始位置 目标图宽高 原图宽高
$copy=imagecopyresampled($newImg,$img,0,0,0,0,$dw,$dh,$width,$height);
//5.告诉浏览器图片相关的信息,jpg 既是jpeg 图像
// header('Content-type:image/jpeg');

// 处理保存图片的路径
if(!file_exists($path)){
    mkdir($path);
}
// 为缩放图像拼接路径
$newPath=rtrim($path,'/').'/';
$path=$newPath.$pre.basename($srcImage);
//6.保存图像    要保存的图片,保存位置(没有保存位置时,浏览器显示图片,有则不显示图片,且不用告诉浏览器信息)
$result=('image'.$suffix)($newImg,$path);   
//释放资源
imagedestroy($img);
imagedestroy($newImg);

return $result;
}
    
?>

```

