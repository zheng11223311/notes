### 1.图形计算

**1-php copy 85.php**

```php
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图形计算器</title>
    <style>
        body{
            text-align:center;
        }
    </style>
</head>
<body>
    <h1>图形计算器</h1>
    <a href="1-php copy 85.php?action=rect">矩形</a> ||
    <a href="1-php copy 85.php?action=triangle">三角形</a> ||
    <a href="1-php copy 85.php?action=circle">圆形</a>
</body>
</html>
<?php
include './1-php copy 86.php';
if(!empty($_GET['action'])){
    //创建树形对象
    $classname=$_GET['action'];
    // 首字母大写
    // echo ucfirst($classname);
    $shape=new $classname($_POST);
    if($shape instanceof Shape){
        //通过类名创建图形对象
        $shape->view();
        //用户是否提交了对应图像界面的表单 如果提交了则需要数据验证
        if(isset($_POST['dosubmit'])){
            //查看用户输入的数据是否正确,失败提示
            if($shape->yan($_POST)){
                //计算图形的面积和周长
                echo $shape->name. '的周长为:'.$shape->zhou().'<br/>';
                echo $shape->name. '的面积为:'.$shape->area().'<br/>';
            }
        }
    }else{
        echo '必须按照要求执行';
    }
}else{
    //如果用户没有点击链接,则默认访问这里
    echo '请选择一个要计算的图形';
}
?>

```

**1-php copy 86.php**

```php
<?php
//抽象类
//为其他类定义要求
abstract class Shape{
    //形状的名称
    public $name;
    //形状验证的方法
    abstract function yan(array $arr);
    //形状图形的表单页面
    abstract function view();
    //形状计算面积方法
    abstract function area();
    //形状计算周长方法
    abstract function zhou();
}

//继承图像的抽象方法
class Rect extends Shape{
    private $width;
    private $height;
    // 构造函数.初始化赋值成员属性
    function __construct($arr=array()){
        if(!empty($arr)){
            $this->width=$arr['width'];
            $this->height=$arr['height'];
        }
        $this->name='矩形';
    }
    //形状验证的方法
     public function yan(array $arr){
         $result=true;
        if($arr['width']<0){
            echo $this->name.'宽度不能小于0 !<br/>';
            $result=false;
        }
        if($arr['height']<0){
            echo $this->name.'高度不能小于0 !<br/>';
            $result=false;
        }
         return $result;
     }
    //形状图形的表单页面
    public function view(){
        $width=$_POST['width']??'';
        $height=$_POST['height']??'';
        $form='<form action="1-php copy 85.php?action=rect" method="post">';
            $form.=$this->name.'的宽:<input type="text" name="width" value="'.$width.'"/><br/>';
            $form.=$this->name.'的高:<input type="text" name="height" value="'.$height.'"/><br/>';
            $form.='<input type="submit" name="dosubmit" value="计算"/><br/>';

        $form.='</form>';

        echo $form;
    }
    //形状计算面积方法
    public function area(){
        return $this->width* $this->height;
    }
    //形状计算周长方法
    public function zhou(){
        return 2* ($this->width+ $this->height);
    }

}
//继承图像的抽象方法
class Triangle extends Shape{
    private $bian1;
    private $bian2;
    private $bian3;
    // 构造函数.初始化赋值成员属性
    function __construct($arr=array()){
        if(!empty($arr)){
            $this->bian1=$arr['bian1'];
            $this->bian2=$arr['bian2'];
            $this->bian3=$arr['bian3'];
        }
        $this->name='三角形';
    }
    //形状验证的方法
     public function yan(array $arr){
         $result=true;
        if($arr['bian1']<0||$arr['bian3']<0||$arr['bian2']<0){
            echo '边不能小于0 !<br/>';
            $result=false;
        }
        if($arr['bian1']+$arr['bian2']<$arr['bian3']||$arr['bian1']+$arr['bian3']<$arr['bian2'] ||$arr['bian3']+$arr['bian2']<$arr['bian1']){
            echo '两边之和必须大于第三边';
            $result=false;
        }
         return $result;
     }
    //形状图形的表单页面
    public function view(){
        $bian1=$_POST['bian1']??'';
        $bian2=$_POST['bian2']??'';
        $bian3=$_POST['bian3']??'';
        $form='<form action="1-php copy 85.php?action=triangle" method="post">';
            $form.=$this->name.'的第一个边:<input type="text" name="bian1" value="'.$bian1.'"/><br/>';
            $form.=$this->name.'的第二个边:<input type="text" name="bian2" value="'.$bian2.'"/><br/>';
            $form.=$this->name.'的第三个边:<input type="text" name="bian3" value="'.$bian3.'"/><br/>';
            $form.='<input type="submit" name="dosubmit" value="计算"/><br/>';

        $form.='</form>';

        echo $form;
    }
    //形状计算面积方法
    public function area(){
        // 海伦公式
        // 半周长
        $p=($this->bian1+ $this->bian2+$this->bian3)/2;
        //保留2位小数
        return round(sqrt($p*($p- $this->bian1)*($p- $this->bian2)*($p- $this->bian3)),2);
    }
    //形状计算周长方法
    public function zhou(){
        return $this->bian1+ $this->bian2+$this->bian3;
    }
}
//继承图像的抽象方法
class Circle extends Shape{
    private $radius=0;
    // 构造函数.初始化赋值成员属性
    function __construct($arr=array()){
        if(!empty($arr)){
            $this->radius=$arr['radius'];
        }
        $this->name='圆形';
    }
    //形状验证的方法
     public function yan(array $arr){
         $result=true;
        if($arr['radius']<0){
            echo '半径不能小于0 !<br/>';
            $result=false;
        }
        
         return $result;
     }
    //形状图形的表单页面
    public function view(){
        $bian1=$_POST['radius']??'';
        $form='<form action="1-php copy 85.php?action=circle" method="post">';
            $form.=$this->name.'的半径为:<input type="text" name="radius" value="'.$bian1.'"/><br/>';
            $form.='<input type="submit" name="dosubmit" value="计算"/><br/>';
        $form.='</form>';
        echo $form;
    }
    //形状计算面积方法
    public function area(){
        return pi()*pow($this->radius,2);
    }
    //形状计算周长方法
    public function zhou(){
        return 2*pi()*$this->radius;
    }
}
?>

```

