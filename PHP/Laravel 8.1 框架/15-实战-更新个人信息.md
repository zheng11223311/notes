# 更新个人信息

利用学过的数据库操作,更新用户的个人信息



`项目/app/Http/Controller/UserController.php`

```php
//部分片段

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;

/**
     * 个人中心-修改个人信息-更新数据
     */
    public function infoUpdate(Request $request){
        // dd('个人中心-修改个人信息-更新数据');
        $name=$request->input('name');
        $email=$request->input('email');
        // dd($name,$email);
        // 更新数据
        // 不能这么操作,会更新整个表,需要指定id
        // $re=DB::update(['name'=>$name,'email'=>$email]);
        // dd($re);
        
        // 获取用户ID
        // 使用auth 辅助函数
        // 当前登入用户
        // $uid=auth()->user()->id;
        // 或
        // $uid=auth()->id();
        // 使用门面函数
        // $uid=Auth::user()->id;
        // $uid=Auth::id;
        // dd($uid);

        // 更新数据
        // $re=DB::table('users')
        // ->where('id',$uid)
        // ->update(['name'=>$name,'email'=>$email]);
        // dd($re);
        
        //使用模型更新
        // 是一个Model 类型
        // dd(auth()->user());
        $user=auth()->user();
        // 修改
        $user->name=$name;
        $user->email=$email;
        // 执行更新
        $user->save();
    }

```

