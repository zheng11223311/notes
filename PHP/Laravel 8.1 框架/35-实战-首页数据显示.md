# 首页数据显示



**查询数据,分配给模板**

`app\Http\Controllers\IndexController.php`

```php
<?php

namespace App\Http\Controllers;

use App\Models\Blog;
use Illuminate\Http\Request;

class IndexController extends Controller
{
    /** 使用/** 热键 就会自动生成注释
     * 博客首页
     */
    public function Index(){
        // dd('博客首页');

        // 查询博客数据
        // 查询已发布的数据
        $blogs=Blog::where('status',1)->get();
        // dd($blogs);
        return view('index.index',['blogs'=>$blogs]);
    }
}

```



**模板使用数据**

`resources\views\index\index.blade.php`

```php
@extends('layouts.app')

@section('title','首页')


@section('style')
    <link rel="stylesheet" href="{{asset('css/index.css')}}">
    <style>

    </style>
@endsection


@section('content')
    <div class="jumbotron jumbotron-fluid px-0">
        <div class="container text-center text-white">
            <h4 class="display-6">基于Laravel 的博客项目</h4>
            <p class="lead">项目仅用于学习</p>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-sm-9">
                <div class="card">
                    <div class="card-body">
                        @foreach ($blogs as $blog)
                            <div class="article-body">
                                <div>
                                    {{-- 等以后讲到模型关联,将id 替换为对应的名称 --}}
                                    <span class="article-author">{{$blog->user_id}}</span>
                                    {{-- $blog->updated_at 是一个 carbon 对象,dd打印看出, 在packagist 中搜索carbon,就可以看到使用方法 --}}
                                    {{-- diffForHumans carbon 的时间格式化 --}}
                                    {{-- {{dd($blog->updated_at);}} --}}
                                    <span class="article-time">{{$blog->updated_at->diffForHumans()}}</span>
                                </div>
                                <h2 class="font-weight-bold my-3 article-title">
                                    {{-- <a class="text-dark" href="{{route('blog.show',['blog'=>1])}}">博客博客博客博客博客博客</a> --}}
                                    <a class="text-dark" href="{{route('blog.show',1)}}">{{$blog->title}}</a>
                                </h2>
                                <div class="article-des">{{$blog->content}}</div>
                                <div>
                                    {{-- 标签 --}}
                                    {{-- categories() 自定义辅助函数 app/helpers.php --}}
                                    <a href="#" class="badge badge-warning mt-3 article">{{categories()[$blog->category_id]}}</a>
                                </div>
                            </div>
                            <hr>
                        @endforeach
                        <nav class="d-flex justify-content-center mt-4">
                            <ul class="pagination">
                                <li class="page-item disabled">
                                    <a href="#" class="page-link" tabindex="-1" aria-disabled="">上一页</a>
                                </li>
                                <li class="page-item">
                                    <a href="#" class="page-link">1</a>
                                </li>
                                <li class="page-item active" aria-current="page">
                                    <a href="#" class="page-link">
                                        2 
                                        {{-- <span class="sr-only">11</span> --}}
                                    </a>
                                </li>
                                <li class="page-item">
                                    <a href="#" class="page-link">3</a>
                                </li>
                                <li class="page-item">
                                    <a href="#" class="page-link">下一页</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="col-sm-3 p-0">
                @include('common.right-card',[
                    'imgUrl'=>'https://www4.bing.com//th?id=OHR.SwedishAntenna_ZH-CN9163420082_1920x1080.jpg&rf=LaDigue_1920x1080.jpg&pid=hp&w=240&h=135',
                    'title'=>'博客网站',
                    'content'=>'一个用来学习Laravel 的博客项目,基于Bootstrap4.0 开发',
                    'count'=>$blogs->count()
                ])
            </div>
        </div>
    </div>
@endsection
```

