# 实战-博客分类表迁移

**创建迁移文件**

```powershell
php artisan make:migration create_categories_table --create=categories	 # --create=categories 指明创建的表,不写默认使用create_categories_table 中的categories 创建

#Created Migration: 2022_05_15_143758_create_categories_table
```



**写入代码**

`项目/database/migrations/2022_05_15_143758_create_categories_table.php`

```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateCategoriesTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        // Schema::create('categories'  创建categories 表
        Schema::create('categories', function (Blueprint $table) {
            // 创建id
            $table->id();
            // 创建name 字段,备注 分类的名称
            $table->string('name')->comment('分类的名称');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('categories');
    }
}

```



**执行刷新**

命令 `migrate:refresh` 首先会回滚已运行过的所有迁移，随后会执行 `migrate`。这一命令可以高效地重建你的整个数据库：

前面的测试创建的表会被清除掉

```powershell
php artisan migrate:refresh
```

显示

```powershell
Rolling back: 2022_05_15_141655_add_title_to_photos_tables
Rolled back:  2022_05_15_141655_add_title_to_photos_tables (2.10ms)
Rolling back: 2022_05_15_121249_create_photos_table
Rolled back:  2022_05_15_121249_create_photos_table (2.07ms)
Rolling back: 2022_05_14_114022_add_avatar_to_users
Rolled back:  2022_05_14_114022_add_avatar_to_users (0.09ms)
Rolling back: 2019_12_14_000001_create_personal_access_tokens_table
Rolled back:  2019_12_14_000001_create_personal_access_tokens_table (2.23ms)
Rolling back: 2022_05_13_044820_create_sessions_table
Rolled back:  2022_05_13_044820_create_sessions_table (3.32ms)
Rolling back: 2019_08_19_000000_create_failed_jobs_table
Rolled back:  2019_08_19_000000_create_failed_jobs_table (1.33ms)
Rolling back: 2014_10_12_200000_add_two_factor_columns_to_users_table
Rolled back:  2014_10_12_200000_add_two_factor_columns_to_users_table (5.88ms)
Rolling back: 2014_10_12_100000_create_password_resets_table
Rolled back:  2014_10_12_100000_create_password_resets_table (2.08ms)
Rolling back: 2014_10_12_000000_create_users_table
Rolled back:  2014_10_12_000000_create_users_table (1.08ms)
Migrating: 2014_10_12_000000_create_users_table
Migrated:  2014_10_12_000000_create_users_table (6.73ms)
Migrating: 2014_10_12_100000_create_password_resets_table
Migrated:  2014_10_12_100000_create_password_resets_table (6.28ms)
Migrating: 2014_10_12_200000_add_two_factor_columns_to_users_table
Migrated:  2014_10_12_200000_add_two_factor_columns_to_users_table (5.36ms)
Migrating: 2019_08_19_000000_create_failed_jobs_table
Migrated:  2019_08_19_000000_create_failed_jobs_table (6.35ms)
Migrating: 2019_12_14_000001_create_personal_access_tokens_table
Migrated:  2019_12_14_000001_create_personal_access_tokens_table (11.27ms)
Migrating: 2022_05_13_044820_create_sessions_table
Migrated:  2022_05_13_044820_create_sessions_table (14.97ms)
Migrating: 2022_05_14_114022_add_avatar_to_users
Migrated:  2022_05_14_114022_add_avatar_to_users (4.69ms)
Migrating: 2022_05_15_121249_create_photos_table
Migrated:  2022_05_15_121249_create_photos_table (2.33ms)
Migrating: 2022_05_15_141655_add_title_to_photos_tables
Migrated:  2022_05_15_141655_add_title_to_photos_tables (8.52ms)
Migrating: 2022_05_15_143758_create_categories_table
Migrated:  2022_05_15_143758_create_categories_table (2.30ms)
```

