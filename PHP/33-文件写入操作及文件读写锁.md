### 1.文件写入

```php
<?php

// 1.打开文件
// w 写入文件方式,如果文件不存在则会创建,如果文件存在,则会覆盖原来的文件
$result=fopen('./c.txt','w');      
var_dump($result);      

//2.写入文件
$int=fwrite($result,'哈哈哈哈');
var_dump($int); //返回内容字节大小

// 关闭文件
fclose($result);  

?>
```

```php
<?php
// 写入文件之一步到位
// 如果文件不存在则会创建,如果文件存在,则会覆盖原来的文件
$file=file_put_contents('./c.txt','哈哈哈');
var_dump($file);    //返回内容字节大小

// 追加写法 FILE_APPEND 追加
$file=file_put_contents('./c.txt','追加的内容',FILE_APPEND);
var_dump($file);
?>
```

### 2.文件读写锁

防止多个人读取或写入同一文件,指针读取顺序错乱

**1.读取加锁**

```php
<?php
// 1.打开文件
$result=fopen('./c.txt','r');      

//加读锁
$suo=flock($result,LOCK_SH);
var_dump($suo);	//true

//释放 解锁
$re=flock($result,LOCK_UN);
var_dump($re);	//true

// 关闭文件
fclose($result);  

?>
```

```php
<?php
// 1.打开文件
$result=fopen('./c.txt','r');      

if(flock($result,LOCK_SH)){
    while(!feof($result)){
        $con=fread($result,1);
        echo $con;
    }
    flock($result,LOCK_UN);
}


// 关闭文件
fclose($result);  

?>
```

**2,写入加锁**

```php
<?php
// 1.打开文件
$result=fopen('./c.txt','a');      

if(flock($result,LOCK_EX)){
        $con=fwrite($result,'哈哈哈哈');
        var_dump($con);
        flock($result,LOCK_UN);
}


// 关闭文件
fclose($result);  

?>
```

