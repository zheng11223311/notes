### 1.文件的下载

1. 将字符串按照指定的编码格式进行转换

   1. iconv(输入的编码格式,输出的编码格式,要转换的字符串)
   2. 返回转换后的字符串
   3. 或者直接设置header('content-type:text/html;charset=utf-8');

2. header 发送原生的HTTP 头

   1. //声明要下载的类型

      **header("Content-type: image/jpeg");**

      //下载后文件名称
      **$name='帅哥.jpeg';**
      //低配浏览器不支持utf
      //编码转换  将utf 装换成gbk
      **$newName=iconv('utf-8','gbk',$name);**
      //对下载的文件进行描述并且指定下载文件的名称
      **header('Content-Disposition: attachment;filename='.$newName);**
      // 读取下载文件(要下载的文件位置)
      **readfile('./upload/1.jpeg');**

```php
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <a href="./1-php copy 18.php" >毛驴下载</a>
</body>
</html>
```

**1-php copy 18.php 文件**

```php
<?php
//实现下载
//声明要下载文件的类型
header("Content-type: image/jpeg");
//下载后文件名称
$name='帅哥.jpeg';
//低配浏览器不支持utf
//编码转换  将utf 装换成gbk
$newName=iconv('utf-8','gbk',$name);
//对下载的文件进行描述并且指定下载文件的名称
header('Content-Disposition: attachment;filename='.$newName);
// 读取下载文件(要下载的文件位置)
readfile('./upload/1.jpeg');
?>

```

**完整版下载**

```php
<?php
// 设置字符集
header('content-type:text/html;charset=utf-8');
echo '我们';

// 执行下载
$type=mime_content_type($_GET['path'])
$name=ltrim(strrchr($_GET['path'],'/'),'/')
header('content-type:'.$type);

//对下载的文件进行描述并且指定下载文件的名称
header('Content-Disposition: attachment;filename='.$name);
// 读取下载文件(要下载的文件位置)
readfile($_GET['path']);

?>

```

**设置字符集**

```php
<?php
// 设置字符集
header('content-type:text/html;charset=utf-8');
echo '我们';

// 跳转    
sleep(10);
// 写相对路径，只能跳转到相对路径，并不是到相应的网址
// header('location:www.yyqx.tech/login.html');
// 跳转到对应网址
// php5.3 之前，header 之前一定要有输出，不然会报错（因为head是最先接收到消息的）
header('location:http://www.yyqx.tech/login.html');

?>

```

