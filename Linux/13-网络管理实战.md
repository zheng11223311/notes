# 网络管理实战

## 一.物理层

### 1.信号

#### 1.模拟信号

不断变换的物理量(曲线函数)

使用电话网络

#### 2.数字信号

两种恒定物理量:分立的脉冲信号(折线函数,0和1)

使用计算机网络

**优点:**

抗噪音和抗衰减比较强

### 2.介质

#### 1.双绞线

##### 1.EIA / TIA568 标准

###### 1.外形

八根线芯,两两互绞

###### 2.功能分类

屏蔽型

非屏蔽型

###### 3.速率分类

cat 5 /5类线/10M100M

cat 5e/超5类线/10M100M

cat 6

###### 4.接口

RJ45/水晶头

线序:EIA/TIA568B : 橙白 , 橙 , 绿白, 蓝, 蓝白 , 绿 , 棕白, 棕

标准网线:两端线序相同

#### 2.光纤

多模     /   单模

纤芯粗  /   芊芯细

低速      /    高速

近         /     远

便宜    /      贵

FC/ST/LC

## 二.数据链路层

### 1.功能

链路创建,维护,管理,帧封装,传输,同步差错校验

### 2.地址

#### 1.MAC 地址(物理地址)

Media Access Control Address

媒体访问控制地址

#### 2.结构

48 位2进制数字

12 位16进制数字(4位2进制= 1位 16进制)

#### 3.示例

前六位是厂商标识

后六位是硬件标识

00-21-CC-C3-8C-B0

### 3.帧封装

MAC 地址是怎么写到信息当中的呢?

目标MAC(接收方) //源MAC(发送方) //数据 //CRC(循环冗余校验和)

目的MAC 地址大小:6B

源MAC 地址:6B

类型:2B

数据:46-1500B

CRC:4B

**示例:**

00-00-00-00-00-AA 00-00-00-00-00-BB hello

### 4.交换机工作原理

**学习/广播/转发/更新**

用来连接多台电脑,2台电脑可以直接使用水晶头连接,多台连接需要交换机

学习:交换机会记录连通过的主机的MAC 地址,如果300s 内没有再次联通,就会删除记录

### 5.组建局域网

通过Cisco Packet Tracert 软件,组建一个局域网

**两台主机通信: **

1. 添加主机
2. 添加线路
3. 配置IP 和掩码
4. 测试通信

**四台主机通信: **

1. 添加主机和交换机

2. 连接线缆

3. 配置IP 和Web 服务

4. 测试通信

5. 观察交换机工作原理

   1. ```shell
      #点击交换机,右键选择命令行
      show mac-address-table
      ```

### 6.VLAN

**名词解释:**虚拟局域网(Virtual Local Area Network)

生产环境,交换网络是互联互动的,因为人员职能的关系,需要隔离

企业中,用来对不同部门进行隔离,不同的部门无法相互访问,保证安全性

**划分VLAN 的方法:**

创建VLAN (2~1024)

根据接口和VLAN 的关系:

接口和VLAN 10

F0 /1~F0/10     VLAN 10

F0 /11~F0/20    VLAN 20

**配置: **

交换机1 上配置

```shell
#进入vlan
enable #特权,简写en
config t	#进入配置模式(config)
#创建vlan
vlan 10		#创建局域网10
vlan 20		#创建局域网20
#将接口捆绑至vlan
interface fastethernet0/1	#必须要接口模式下才可以输入,简写 int f0/1
switch access vlan 10 		#将端口加入VLAN 10 下,简写 sw ac vl 10 , 没有分配vlan 前,默认都是vlan 1 内

interface fastethernet0/2	#将2 号主机加入vlan
switch access vlan 10 		#将端口加入VLAN 10,同一个vlan 的主机才能互相访问

interface fastethernet0/3	#将3 号主机加入vlan
switch access vlan 20 		#将端口加入VLAN 20,同一个vlan 的主机才能互相访问

show vlan   #查看自己创建的vlan,enable 下才能查看

exit 
exit
exit  #3 次退出
```

**验证**

使用相同的vlan 主机通信,不同的vlan 主机通信不成功

```shell
#第一台主机ping 第二台主机
ping 198.146.21.22
```

### 7.TRUNK

#### 1.干道

对不同交换机下的相同 vlan 进行合并

#### 2.核心技术

打标记,一台主机数属于哪个vlan , 在通信时,交换机就会对其打上属于哪个vlan 的标签,vlan 标签只在trunk 上存在(即只存在交换机之间)

#### 3.目的

通过一根网线,传递不同的VLAN 信息

#### 4.配置

在另外一台交换机上switch2 ,实现划分vlan 的行为,雷同实验1

**步骤:**

1. 准备交换机1
2. 在交换机1,划分VLAN 10 和VLAN 20 ,主机配置IP 地址
3. 准备交换机2
4. 在交换机2,划分VLAN 10 和VLAN 20,主机配置IP 地址
5. 连接两台交换机,在连接的端口上,配置TRUNK
6. 相同的VLAN 的主机互通
7. 不同VLAN 的主机不可通信

```shell
#switch1 实验步骤
enable
config t
vlan 10
vlan 20
interface fastethernet0/1	#24 个接口 fastethernet0/1 (接口名就这样子)~fastethernet0/24
switch access vlan 10
interface f0/2
switch access vlan 10
interface f0/3
switch access vlan 20
interface f0/4


switch access vlan 20
#在交换机互联的接口中配置
interface f0/5
switch mode trunk	#配置链路


#switch2 	#也需要在f0/5 配置trunk 链路
```

#### 5.测试

实现不同的交换机上,相同VLAN 主机通信成功

实现不同的交换机上,不同VLAN 主机通信不成功

#### 6.总结

交换机接口工作模式,分为access 和trunk

access 是指定接口连接的是主机

trunk 是指定接口连接的是交换机,需要通过多个VLAN 的数据