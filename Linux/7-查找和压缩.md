# 查找和压缩

## 一.文件的查找

### 1.简介

which : 命令查找

find: 文件查找,针对文件名

locate: 文件查找,依赖数据库

### 2.命令文件查找

```shell
#查找ls 命令的位置
which ls	#从PATH 环境变量
#alias ls='ls --color=auto'		#起别名:为命令ls 起别名ls --color=auto  color 自动为指令显示带颜色
#	/usr/bin/ls

#或者
whereis vim

#自定义指令
alias xx='ll --color=auto'
xx     #显示ll 指令带颜色的格式

locate ls	#需要updatedb 刷新
touch 1.txt
updatedb 	#电脑重启时,自动执行的刷新数据库命令,这里手动执行刷新,locate 才能找到新建的文件
locate 1.txt
```

### 3.任意文件

find

**语法: **

find [path] [options] [expression] [action]

命令  路径    选项              表达式        动作

**按文件名:**

```shell
find /etc -name '1.txt'		#在/etc 下查找文件名为1.txt 的文件
find /etc -name 1.txt			#不加引号
find /etc -iname 1.TXT		#iname 不区分大小写
find /etc -iname 1.T*		#不区分大小写查找所有带 1.T 的文件
```

**按文件大小:**

```shell
find /etc -size +5M  	#查找大于5M 的文件
find /etc -size 5M  	#查找等于5M 的文件
find /etc -size -5M  	#查找小于5M 的文件

ll -h    #h 人性化显示,大小显示M
```

**按文件查找的目录深度: **

```shell
find / -maxdepth 3 -a -name 'ifcgf-en*'		#查找最大层级为3的,文件为ifcgf-en 开头的 ,-a and
#/etc/sys/bb   三级层次位置,在bb 下查找

find / -mindepth 3 -a -name 'ifcgf-en*'	 #最小层级为3
```

**按文件属组,属主找: **

```shell
find  /home  -user ss		#查找属主是ss 的文件
find /home -group hr		#查找属组是hr 的文件
```

**按文件类型: **

linux 不以文件后缀做区分文件类型,window 是以文件后缀来区分文件类型,linux 一个文件可以为任意后缀名

```shell
find /dev -type  f		#查找普通文件 f file, 比如1.txt,1.json 都是普通文件
find /dev -type b 		#查找块文件(设备文件) b  block
find /dev -type l		#查找链接文件 l link
```

**按文件权限: **

```shell
find . -perm 644  -ls		#查找当前目录( . ) 权限(perm)为644 的文件,动作 ls 长格式查看,rm 删除,默认是 -print 直接查看
```

**找到后处理的动作 ACTIONS : **

```shell
find . -perm 644  -delete     #找到后删除	
find . -perm 644  -ok cp -rfv {}   /tmp \;	#查找后复制,使用cp 必须加ok,表示携带中转符号,{} 表示这是源文件位置 ,拷贝到/tmp 下,加\; 结束符
# ok 连接   {}  引用    \; 结束  
#提示是否拷贝,按 yes
```



## 二.文件打包和压缩

### 1.简介

tar 命令几乎是Unix/Linux 系统中备份文件的可靠方法,

几乎可以工作于任何环境中,它的使用权限是所有用户

建议针对目录

### 2.打包,压缩

语法: tar 选项 压缩包名称 源文件

```shell
tar -cf etc.tar /etc		#f filename 文件名,	etc.tar  可以不带.tar 名,Linux 不区分后缀,只是方便自己记忆, c create	,仅打包,不压缩,保持原大小

tar -cfz etc.tar.gz /etc	#z 是gzip 压缩工具,压缩效率最小
tar -cfj etc.tar.bz /etc	#j 是bzip,压缩较小
tar -cfJ etc.tar.xz /etc		#J 是xzip,压缩最大

#观察三个包的体积
ll -h etc*

#压缩速度和压缩体积成反比
#压缩后体积  z > b >  x   ,压缩速率相反
```

**压缩原理---去重法(文件体积变小,缺点无法直接使用,需要解压)**

用一个变量代替多个重复的值

### 3.解压,解包

```shell
tar -xf   etc.tar  	#x 解压 f filename ,解压缩后得到的是压缩时的路径etc,而不是压缩文件的名称,解压任意压缩包
#或
tar xf etc.tar

tar xf etc.tar -C /tmp/   #-C 指定解压到的路径
```

