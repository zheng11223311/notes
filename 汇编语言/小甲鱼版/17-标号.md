### 1.标号

一个标号代表了一个地址

codesg: 放在segment 的前面,作为一个段的名称,这个段的名称最终被编译,连接程序处理为一个段的段地址

**任务:编写运算2^3**

- 定义一个段
- 实现处理任务
- 程序结束
- 段与段寄存器关联

```
assume cs:abc
abc segment
mov ax,2
add ax,ax
add ax,ax
add ax,ax
abc ends
end
```

### 2.程序返回

我们的程序嘴最先以汇编指令的形式存在源程序中.,经编译,连接后转变为机器码,存储在可执行文件中,那么,它怎样得到运行呢?

**DOS 中的程序运行**

DOS 是一个单任务操作系统

一个程序p2 在可执行文件中,则必须有一个正在运行的程序p1 ,将p2 从可执行文件中加载入内存后,将CPU 控制权交给p2 ,p2 才能得以运行,p2 开始运行后,p1 暂停运行

而当p2 运行完毕就后,应该将CPU 的控制权交还给使他得以运行的p1 ,此后p1 继续与运行

**这个过程称之为程序返回**

> 如何返回呢?
>
> 应该在程序的末尾添加返回的程序段
>
> ```assembly
> mov ax,4c00H
> int 21H				;int 中断  ,中断21 号
> ```
>
> 这两条指令所实现的功能就是程序返回

### 3.段结束,程序结束,程序返回

| 目的                 | 相关指令                | 指令性质 | 指令执行者          |
| -------------------- | ----------------------- | -------- | ------------------- |
| 通知编译器一个段结束 | 段名 ends               | 伪指令   | 编译时,由编译器执行 |
| 通知编译器程序结束   | end                     | 伪指令   | 编译时,由编译器执行 |
| 程序返回             | mov ax,4c00H<br>int 21H | 汇编指令 | 编译时,由CPU 执行   |

# **汇编程序文件的后缀名为.asm ,其中 ; 为注释符,语言为assembly**

**一般来说,有两类错误时我们得不到所期望的目标文件:**

1. 我们程序中有"Severe Errors"
2. 找不到所给出的源程序文件

**需要有masm.exe 和link.exe 和ml.exe(结合masm和link 的功能) 文件才能编译和连接,现在的masm 一个安装包上都具备这些功能**

```
cmd 中输入 masm 1.asm    //编译1.masm 文件 ,编译后产生.obj 文件,masm 1.asm; 带;,不用确认步骤
输入 link 1.obj          //连接obj 文件,编译为1.exe 文件,link 1.asm; 带;,不用确认步骤
输入 1.exe               //或者省略.exe 也可以,执行这个文件,或者双击1.exe 文件也可以执行

输入 ml 1.asm          //直接产生1.exe 文件和1.obj 文件
```

### 4.关于编译和连接

编译和连接的作用是什么?

**连接的作用有以下几个:**

- 当源程序很大时,.可以将它分为多个源程序文件来编译,每个源程序编译成为目标文件(.obj)后,再用连接程序将他们连接到一起,生成一个可执行文件
- 程序中调用了某个库文件中的子程序,需要将这个库文件和该程序生成的目标文件连接到一起,生成一个可执行文件
- 一个源程序编译后,得到了存有机器码的目标文件,目标文件中还有些内容还不能直接用来生成可执行文件,连接程序将这些内容处理为最终的可执行信息

所以,在只有一个源程序文件,而又不是需要调用某个库中的子程序的情况下,也必须用连接程序对目标文件进行处理,生成可执行文件

**注意:对于连接的过程,可执行文件时我们要得到的最终结果**

我们用汇编语言编程,就要用到:编辑器(Edit),编译器(masm),连接器(link),调试工具(debug) 等所有工具,而这些工具都是在操作系统之上运行的程序,所以我们的学习过程必须在操作系统的环境中进行

