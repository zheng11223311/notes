### 1.栈段

前面讲过,对于8086CPU 机,在编程时,我们可以根据需要,将一组内存单元定义为一个字段

我们将长度为N (N<=64K)的一段地址连续,起始地址为16的倍数的内存单元,当作栈来使用,从而定义了一个栈段

比如我们将10010H~1001FH 这段长度为16 字节的内存空间当作栈来使用,以栈的方式进行访问

这段空间就可以称为栈段,段地址为1000H .大小为16 字节

将一段内存当作栈段,仅仅是我们在编程时的一种安排,CPU 并不会由于这种安排,就在执行push,pop 等栈操作指令时就会自动的将我们定义的栈段当作栈空间来访问

**如何使得如push , pop 等栈操作指令访问我们定义的栈段呢?**

将SS:SP 指向我们定义的栈段

如果sp 为FFFFH,在增大会溢出,变为0000H(即从头覆盖),高位舍去,16位已经存储不了更大的数据了

**总结:**

- 我们可以用一个段存放数据,将它定义为"数据段"
- 我们可以用一个段存放代码,将它定义为"代码段"
- 我们可以用一个段当作栈,将它定义为"栈段",栈是用来临时存储数据的

若要然CPU 按照我们的安排来访问这些段,就要:

- 对于数据段,将它的段地址放在DS 中,用mov , add ,sub 等访问内存单元的指令时,CPU 就将我们定义的数据段中的内容当作数据段来访问
- 对于代码段,将他的地址放在CS 中,将段的第一条指令的偏移地址放在IP 中,这样CPU 就将执行我们定义的代码段中的指令
- 对于栈段,将它的段地址放在SS 中,将栈顶单元的偏移地址放置在SP 中,这样CPU 在需要进行栈操作的时候,比如执行push,pop 指令等,就将我们定义的栈段当作栈空间来用

**一段内存,可以既是代码的存储空间,又是数据的存储空间,还可以是栈空间,也可以什么都不是**

**关键在于CPU 中寄存器的设置,即CS ,IP ,SS ,SP ,DS 的指向**

