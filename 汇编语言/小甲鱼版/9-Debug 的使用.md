### 1.Debug 的使用

**什么是Debug**

Debug 时DOS ,Windows 都提供的实模式(8086 方式)程序的调试工具,使用它,可以查看CPU 各种寄存器中的内容,内存的情况和在机器码级跟踪程序运行

**我们用到的Debug 功能(主要指令)**

- 用Debug 的 R 命令**查看,改变CPU 寄存器的内容**
- 用Debug 的 D 命令**查看内存中的内容**
- 用Debug 的 E 命令**改写内存中的内容**
- 用Debug 的 U 命令**将内存中的机器指令翻译成汇编指令**
- 用Debug 的 T 命令**执行一条机器指令**
- 用Debug 的 A 命令**以汇编指令的格式在内存中写入一条机器指令**

**进入Debug**

```
window+R  输入debug  回车   
输入 r 查看
输入 r ax  回车 输入 1111       //将ax 修改为1111

win7 64位系统下运行不了debug
不支持16位，只能在win7 32位下运行
debug是库文件，是一种编程文件
你可以试着装个虚拟机
xp的，要么装个MSDOS
```

**实验:**

```
window+R  输入debug  回车   
-a 
输入
138c:0100 mov ax,4e20   /第一条要输入地址
//调制器默认输入的都是为16进制,后面不用带H,每一条指令dos 都会显示地址,比如 138c:0100 mov ax,4e20 
mov ax,1416
mov bx,2000
add ax,bx
mov bx,ax
add ax,bx
mov ax,001A
mov bx,0026
add al,bl
add ah,bl
add bh,al
mov ah,0
add al,bl
add al,9c
回车 再回车

-d 138c:0100   //查找到138c:0100 内容
显示
138c:0100	B8 20 4E 05 16 14 BB 00-20 01 DB 89 C3 01 D8 B8
138c:0110   .....    //下一步执行的指令代码
.....

-u 138c:0100 	//显示为汇编语言
显示
138c:0100	B8204E mov ax,4e20    //B8 20 4E   共三个字节
138c:0110   .....    //下一步执行的指令代码
.....

-r cs 			//修改cs 地址
138c
-r ip			//修改ip 地址,结合cs 使其指向 mov ax,4e20 这个指令
0100

-t          //执行定位到的指令
-t          //继续执行定位(即下一个)到的指令
```

**将下面3条指令写入从2000:0 开始的内存单元中,利用这3条指令计算2的8次方**

mov ax,1

add ax,ax
jmp 2000:3

```
window+R   输入debug  回车   
-a  2000:0 mov ax,1
add ax,ax
jmp 2000:3

-r 查看cs,ip 的指向
-r cs
2000			//修改cs 指向2000
-r ip
0			//修改ip 指向 0

-t			//执行一次,每次-t 只执行一次
```

**指令操作方式**

```
-d fff0:0 ff   //ff 为查看的范围
-e ffff:06  再输入 30		//修改ffff:06 的值为30  30为十六进制,转化为十进制为0  
-e B810:0   01 01 02 02 03 03 04 04    //写入数据 ,B810 是显卡的地址
```

